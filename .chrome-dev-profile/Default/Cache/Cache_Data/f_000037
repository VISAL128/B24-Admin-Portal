import "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/date/calendar.js?v=4d3ead2b";
import { t as toDate, g as getDaysInMonth } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/date/comparators.js?v=4d3ead2b";
import { defineComponent, computed, createBlock, openBlock, unref, mergeProps, withKeys, withModifiers, withCtx, renderSlot, createTextVNode, toDisplayString, nextTick } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/vue/dist/vue.runtime.esm-bundler.js?v=4d3ead2b";
import { isToday, getLocalTimeZone, isSameMonth, isSameDay } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/@internationalized/date/dist/import.mjs?v=4d3ead2b";
import { g as getSelectableCells } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/Calendar/utils.js?v=4d3ead2b";
import { u as usePrimitiveElement } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/Primitive/usePrimitiveElement.js?v=4d3ead2b";
import { P as Primitive } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/Primitive/Primitive.js?v=4d3ead2b";
import { u as useKbd } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/shared/useKbd.js?v=4d3ead2b";
import { i as injectCalendarRootContext } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/Calendar/CalendarRoot.js?v=4d3ead2b";

const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "CalendarCellTrigger",
  props: {
    day: {},
    month: {},
    asChild: { type: Boolean },
    as: { default: "div" }
  },
  setup(__props) {
    const props = __props;
    const kbd = useKbd();
    const rootContext = injectCalendarRootContext();
    const { primitiveElement, currentElement } = usePrimitiveElement();
    const dayValue = computed(() => props.day.day.toLocaleString(rootContext.locale.value));
    const labelText = computed(() => {
      return rootContext.formatter.custom(toDate(props.day), {
        weekday: "long",
        month: "long",
        day: "numeric",
        year: "numeric"
      });
    });
    const isUnavailable = computed(
      () => rootContext.isDateUnavailable?.(props.day) ?? false
    );
    const isDateToday = computed(() => {
      return isToday(props.day, getLocalTimeZone());
    });
    const isOutsideView = computed(() => {
      return !isSameMonth(props.day, props.month);
    });
    const isOutsideVisibleView = computed(
      () => rootContext.isOutsideVisibleView(props.day)
    );
    const isDisabled = computed(() => rootContext.isDateDisabled(props.day) || rootContext.disableDaysOutsideCurrentView.value && isOutsideView.value);
    const isFocusedDate = computed(() => {
      return !rootContext.disabled.value && isSameDay(props.day, rootContext.placeholder.value);
    });
    const isSelectedDate = computed(() => rootContext.isDateSelected(props.day));
    function changeDate(date) {
      if (rootContext.readonly.value)
        return;
      if (rootContext.isDateDisabled(date) || rootContext.isDateUnavailable?.(date))
        return;
      rootContext.onDateChange(date);
    }
    function handleClick() {
      if (isDisabled.value)
        return;
      changeDate(props.day);
    }
    function handleArrowKey(e) {
      if (isDisabled.value)
        return;
      e.preventDefault();
      e.stopPropagation();
      const parentElement = rootContext.parentElement.value;
      const indexIncrementation = 7;
      const sign = rootContext.dir.value === "rtl" ? -1 : 1;
      switch (e.code) {
        case kbd.ARROW_RIGHT:
          shiftFocus(currentElement.value, sign);
          break;
        case kbd.ARROW_LEFT:
          shiftFocus(currentElement.value, -sign);
          break;
        case kbd.ARROW_UP:
          shiftFocus(currentElement.value, -7);
          break;
        case kbd.ARROW_DOWN:
          shiftFocus(currentElement.value, indexIncrementation);
          break;
        case kbd.ENTER:
        case kbd.SPACE_CODE:
          changeDate(props.day);
      }
      function shiftFocus(node, add) {
        const allCollectionItems = getSelectableCells(parentElement);
        if (!allCollectionItems.length)
          return;
        const index = allCollectionItems.indexOf(node);
        const newIndex = index + add;
        if (newIndex >= 0 && newIndex < allCollectionItems.length) {
          if (allCollectionItems[newIndex].hasAttribute("data-disabled")) {
            shiftFocus(allCollectionItems[newIndex], add);
          }
          allCollectionItems[newIndex].focus();
          return;
        }
        if (newIndex < 0) {
          if (rootContext.isPrevButtonDisabled())
            return;
          rootContext.prevPage();
          nextTick(() => {
            const newCollectionItems = getSelectableCells(parentElement);
            if (!newCollectionItems.length)
              return;
            if (!rootContext.pagedNavigation.value && rootContext.numberOfMonths.value > 1) {
              const numberOfDays = getDaysInMonth(rootContext.placeholder.value);
              const computedIndex2 = numberOfDays - Math.abs(newIndex);
              if (newCollectionItems[computedIndex2].hasAttribute("data-disabled")) {
                shiftFocus(newCollectionItems[computedIndex2], add);
              }
              newCollectionItems[computedIndex2].focus();
              return;
            }
            const computedIndex = newCollectionItems.length - Math.abs(newIndex);
            if (newCollectionItems[computedIndex].hasAttribute("data-disabled")) {
              shiftFocus(newCollectionItems[computedIndex], add);
            }
            newCollectionItems[computedIndex].focus();
          });
          return;
        }
        if (newIndex >= allCollectionItems.length) {
          if (rootContext.isNextButtonDisabled())
            return;
          rootContext.nextPage();
          nextTick(() => {
            const newCollectionItems = getSelectableCells(parentElement);
            if (!newCollectionItems.length)
              return;
            if (!rootContext.pagedNavigation.value && rootContext.numberOfMonths.value > 1) {
              const numberOfDays = getDaysInMonth(
                rootContext.placeholder.value.add({ months: rootContext.numberOfMonths.value - 1 })
              );
              const computedIndex2 = newIndex - allCollectionItems.length + (newCollectionItems.length - numberOfDays);
              if (newCollectionItems[computedIndex2].hasAttribute("data-disabled")) {
                shiftFocus(newCollectionItems[computedIndex2], add);
              }
              newCollectionItems[computedIndex2].focus();
              return;
            }
            const computedIndex = newIndex - allCollectionItems.length;
            if (newCollectionItems[computedIndex].hasAttribute("data-disabled")) {
              shiftFocus(newCollectionItems[computedIndex], add);
            }
            newCollectionItems[computedIndex].focus();
          });
        }
      }
    }
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(Primitive), mergeProps({
        ref_key: "primitiveElement",
        ref: primitiveElement
      }, props, {
        role: "button",
        "aria-label": labelText.value,
        "data-reka-calendar-cell-trigger": "",
        "aria-disabled": isDisabled.value || isUnavailable.value ? true : void 0,
        "data-selected": isSelectedDate.value ? true : void 0,
        "data-value": _ctx.day.toString(),
        "data-disabled": isDisabled.value ? "" : void 0,
        "data-unavailable": isUnavailable.value ? "" : void 0,
        "data-today": isDateToday.value ? "" : void 0,
        "data-outside-view": isOutsideView.value ? "" : void 0,
        "data-outside-visible-view": isOutsideVisibleView.value ? "" : void 0,
        "data-focused": isFocusedDate.value ? "" : void 0,
        tabindex: isFocusedDate.value ? 0 : isOutsideView.value || isDisabled.value ? void 0 : -1,
        onClick: handleClick,
        onKeydown: [
          withKeys(handleArrowKey, ["up", "down", "left", "right", "space", "enter"]),
          _cache[0] || (_cache[0] = withKeys(withModifiers(() => {
          }, ["prevent"]), ["enter"]))
        ]
      }), {
        default: withCtx(() => [
          renderSlot(_ctx.$slots, "default", {
            dayValue: dayValue.value,
            disabled: isDisabled.value,
            today: isDateToday.value,
            selected: isSelectedDate.value,
            outsideView: isOutsideView.value,
            outsideVisibleView: isOutsideVisibleView.value,
            unavailable: isUnavailable.value
          }, () => [
            createTextVNode(toDisplayString(dayValue.value), 1)
          ])
        ]),
        _: 3
      }, 16, ["aria-label", "aria-disabled", "data-selected", "data-value", "data-disabled", "data-unavailable", "data-today", "data-outside-view", "data-outside-visible-view", "data-focused", "tabindex"]);
    };
  }
});

export { _sfc_main as _ };
                                               

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FsZW5kYXJDZWxsVHJpZ2dlci5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0NhbGVuZGFyL0NhbGVuZGFyQ2VsbFRyaWdnZXIudnVlIl0sInNvdXJjZXNDb250ZW50IjpbIjxzY3JpcHQgbGFuZz1cInRzXCI+XG5pbXBvcnQgdHlwZSB7IERhdGVWYWx1ZSB9IGZyb20gJ0BpbnRlcm5hdGlvbmFsaXplZC9kYXRlJ1xuaW1wb3J0IHR5cGUgeyBQcmltaXRpdmVQcm9wcyB9IGZyb20gJ0AvUHJpbWl0aXZlJ1xuaW1wb3J0IHtcblxuICBnZXRMb2NhbFRpbWVab25lLFxuICBpc1NhbWVEYXksXG4gIGlzU2FtZU1vbnRoLFxuICBpc1RvZGF5LFxufSBmcm9tICdAaW50ZXJuYXRpb25hbGl6ZWQvZGF0ZSdcbmltcG9ydCB7IGNvbXB1dGVkLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSdcbmltcG9ydCB7IGdldERheXNJbk1vbnRoLCB0b0RhdGUgfSBmcm9tICdAL2RhdGUnXG5pbXBvcnQgeyB1c2VLYmQgfSBmcm9tICdAL3NoYXJlZCdcbmltcG9ydCB7IGdldFNlbGVjdGFibGVDZWxscyB9IGZyb20gJy4vdXRpbHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsZW5kYXJDZWxsVHJpZ2dlclByb3BzIGV4dGVuZHMgUHJpbWl0aXZlUHJvcHMge1xuICAvKiogVGhlIGRhdGUgdmFsdWUgcHJvdmlkZWQgdG8gdGhlIGNlbGwgdHJpZ2dlciAqL1xuICBkYXk6IERhdGVWYWx1ZVxuICAvKiogVGhlIG1vbnRoIGluIHdoaWNoIHRoZSBjZWxsIGlzIHJlbmRlcmVkICovXG4gIG1vbnRoOiBEYXRlVmFsdWVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYWxlbmRhckNlbGxUcmlnZ2VyU2xvdCB7XG4gIGRlZmF1bHQ/OiAocHJvcHM6IHtcbiAgICAvKiogQ3VycmVudCBkYXkgKi9cbiAgICBkYXlWYWx1ZTogc3RyaW5nXG4gICAgLyoqIEN1cnJlbnQgZGlzYWJsZSBzdGF0ZSAqL1xuICAgIGRpc2FibGVkOiBib29sZWFuXG4gICAgLyoqIEN1cnJlbnQgc2VsZWN0ZWQgc3RhdGUgKi9cbiAgICBzZWxlY3RlZDogYm9vbGVhblxuICAgIC8qKiBDdXJyZW50IHRvZGF5IHN0YXRlICovXG4gICAgdG9kYXk6IGJvb2xlYW5cbiAgICAvKiogQ3VycmVudCBvdXRzaWRlIHZpZXcgc3RhdGUgKi9cbiAgICBvdXRzaWRlVmlldzogYm9vbGVhblxuICAgIC8qKiBDdXJyZW50IG91dHNpZGUgdmlzaWJsZSB2aWV3IHN0YXRlICovXG4gICAgb3V0c2lkZVZpc2libGVWaWV3OiBib29sZWFuXG4gICAgLyoqIEN1cnJlbnQgdW5hdmFpbGFibGUgc3RhdGUgKi9cbiAgICB1bmF2YWlsYWJsZTogYm9vbGVhblxuICB9KSA9PiBhbnlcbn1cbjwvc2NyaXB0PlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgUHJpbWl0aXZlLCB1c2VQcmltaXRpdmVFbGVtZW50IH0gZnJvbSAnQC9QcmltaXRpdmUnXG5pbXBvcnQgeyBpbmplY3RDYWxlbmRhclJvb3RDb250ZXh0IH0gZnJvbSAnLi9DYWxlbmRhclJvb3QudnVlJ1xuXG5jb25zdCBwcm9wcyA9IHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczxDYWxlbmRhckNlbGxUcmlnZ2VyUHJvcHM+KCksIHtcbiAgYXM6ICdkaXYnLFxufSlcblxuZGVmaW5lU2xvdHM8Q2FsZW5kYXJDZWxsVHJpZ2dlclNsb3Q+KClcblxuY29uc3Qga2JkID0gdXNlS2JkKClcbmNvbnN0IHJvb3RDb250ZXh0ID0gaW5qZWN0Q2FsZW5kYXJSb290Q29udGV4dCgpXG5cbmNvbnN0IHsgcHJpbWl0aXZlRWxlbWVudCwgY3VycmVudEVsZW1lbnQgfSA9IHVzZVByaW1pdGl2ZUVsZW1lbnQoKVxuXG5jb25zdCBkYXlWYWx1ZSA9IGNvbXB1dGVkKCgpID0+IHByb3BzLmRheS5kYXkudG9Mb2NhbGVTdHJpbmcocm9vdENvbnRleHQubG9jYWxlLnZhbHVlKSlcblxuY29uc3QgbGFiZWxUZXh0ID0gY29tcHV0ZWQoKCkgPT4ge1xuICByZXR1cm4gcm9vdENvbnRleHQuZm9ybWF0dGVyLmN1c3RvbSh0b0RhdGUocHJvcHMuZGF5KSwge1xuICAgIHdlZWtkYXk6ICdsb25nJyxcbiAgICBtb250aDogJ2xvbmcnLFxuICAgIGRheTogJ251bWVyaWMnLFxuICAgIHllYXI6ICdudW1lcmljJyxcbiAgfSlcbn0pXG5cbmNvbnN0IGlzVW5hdmFpbGFibGUgPSBjb21wdXRlZCgoKSA9PlxuICByb290Q29udGV4dC5pc0RhdGVVbmF2YWlsYWJsZT8uKHByb3BzLmRheSkgPz8gZmFsc2UsXG4pXG5jb25zdCBpc0RhdGVUb2RheSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIGlzVG9kYXkocHJvcHMuZGF5LCBnZXRMb2NhbFRpbWVab25lKCkpXG59KVxuY29uc3QgaXNPdXRzaWRlVmlldyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuICFpc1NhbWVNb250aChwcm9wcy5kYXksIHByb3BzLm1vbnRoKVxufSlcblxuY29uc3QgaXNPdXRzaWRlVmlzaWJsZVZpZXcgPSBjb21wdXRlZCgoKSA9PlxuICByb290Q29udGV4dC5pc091dHNpZGVWaXNpYmxlVmlldyhwcm9wcy5kYXkpLFxuKVxuXG5jb25zdCBpc0Rpc2FibGVkID0gY29tcHV0ZWQoKCkgPT4gcm9vdENvbnRleHQuaXNEYXRlRGlzYWJsZWQocHJvcHMuZGF5KSB8fCAocm9vdENvbnRleHQuZGlzYWJsZURheXNPdXRzaWRlQ3VycmVudFZpZXcudmFsdWUgJiYgaXNPdXRzaWRlVmlldy52YWx1ZSkpXG5cbmNvbnN0IGlzRm9jdXNlZERhdGUgPSBjb21wdXRlZCgoKSA9PiB7XG4gIHJldHVybiAhcm9vdENvbnRleHQuZGlzYWJsZWQudmFsdWUgJiYgaXNTYW1lRGF5KHByb3BzLmRheSwgcm9vdENvbnRleHQucGxhY2Vob2xkZXIudmFsdWUpXG59KVxuY29uc3QgaXNTZWxlY3RlZERhdGUgPSBjb21wdXRlZCgoKSA9PiByb290Q29udGV4dC5pc0RhdGVTZWxlY3RlZChwcm9wcy5kYXkpKVxuXG5mdW5jdGlvbiBjaGFuZ2VEYXRlKGRhdGU6IERhdGVWYWx1ZSkge1xuICBpZiAocm9vdENvbnRleHQucmVhZG9ubHkudmFsdWUpXG4gICAgcmV0dXJuXG4gIGlmIChyb290Q29udGV4dC5pc0RhdGVEaXNhYmxlZChkYXRlKSB8fCByb290Q29udGV4dC5pc0RhdGVVbmF2YWlsYWJsZT8uKGRhdGUpKVxuICAgIHJldHVyblxuXG4gIHJvb3RDb250ZXh0Lm9uRGF0ZUNoYW5nZShkYXRlKVxufVxuXG5mdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcbiAgaWYgKGlzRGlzYWJsZWQudmFsdWUpXG4gICAgcmV0dXJuXG4gIGNoYW5nZURhdGUocHJvcHMuZGF5KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVBcnJvd0tleShlOiBLZXlib2FyZEV2ZW50KSB7XG4gIGlmIChpc0Rpc2FibGVkLnZhbHVlKVxuICAgIHJldHVyblxuICBlLnByZXZlbnREZWZhdWx0KClcbiAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICBjb25zdCBwYXJlbnRFbGVtZW50ID0gcm9vdENvbnRleHQucGFyZW50RWxlbWVudC52YWx1ZSFcbiAgY29uc3QgaW5kZXhJbmNyZW1lbnRhdGlvbiA9IDdcbiAgY29uc3Qgc2lnbiA9IHJvb3RDb250ZXh0LmRpci52YWx1ZSA9PT0gJ3J0bCcgPyAtMSA6IDFcbiAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICBjYXNlIGtiZC5BUlJPV19SSUdIVDpcbiAgICAgIHNoaWZ0Rm9jdXMoY3VycmVudEVsZW1lbnQudmFsdWUsIHNpZ24pXG4gICAgICBicmVha1xuICAgIGNhc2Uga2JkLkFSUk9XX0xFRlQ6XG4gICAgICBzaGlmdEZvY3VzKGN1cnJlbnRFbGVtZW50LnZhbHVlLCAtc2lnbilcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBrYmQuQVJST1dfVVA6XG4gICAgICBzaGlmdEZvY3VzKGN1cnJlbnRFbGVtZW50LnZhbHVlLCAtaW5kZXhJbmNyZW1lbnRhdGlvbilcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBrYmQuQVJST1dfRE9XTjpcbiAgICAgIHNoaWZ0Rm9jdXMoY3VycmVudEVsZW1lbnQudmFsdWUsIGluZGV4SW5jcmVtZW50YXRpb24pXG4gICAgICBicmVha1xuICAgIGNhc2Uga2JkLkVOVEVSOlxuICAgIGNhc2Uga2JkLlNQQUNFX0NPREU6XG4gICAgICBjaGFuZ2VEYXRlKHByb3BzLmRheSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHNoaWZ0Rm9jdXMobm9kZTogSFRNTEVsZW1lbnQsIGFkZDogbnVtYmVyKSB7XG4gICAgY29uc3QgYWxsQ29sbGVjdGlvbkl0ZW1zOiBIVE1MRWxlbWVudFtdID0gZ2V0U2VsZWN0YWJsZUNlbGxzKHBhcmVudEVsZW1lbnQpXG4gICAgaWYgKCFhbGxDb2xsZWN0aW9uSXRlbXMubGVuZ3RoKVxuICAgICAgcmV0dXJuXG5cbiAgICBjb25zdCBpbmRleCA9IGFsbENvbGxlY3Rpb25JdGVtcy5pbmRleE9mKG5vZGUpXG4gICAgY29uc3QgbmV3SW5kZXggPSBpbmRleCArIGFkZFxuXG4gICAgaWYgKG5ld0luZGV4ID49IDAgJiYgbmV3SW5kZXggPCBhbGxDb2xsZWN0aW9uSXRlbXMubGVuZ3RoKSB7XG4gICAgICBpZiAoYWxsQ29sbGVjdGlvbkl0ZW1zW25ld0luZGV4XS5oYXNBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZWQnKSkge1xuICAgICAgICBzaGlmdEZvY3VzKGFsbENvbGxlY3Rpb25JdGVtc1tuZXdJbmRleF0sIGFkZClcbiAgICAgIH1cbiAgICAgIGFsbENvbGxlY3Rpb25JdGVtc1tuZXdJbmRleF0uZm9jdXMoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG5ld0luZGV4IDwgMCkge1xuICAgICAgaWYgKHJvb3RDb250ZXh0LmlzUHJldkJ1dHRvbkRpc2FibGVkKCkpXG4gICAgICAgIHJldHVyblxuICAgICAgcm9vdENvbnRleHQucHJldlBhZ2UoKVxuICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDb2xsZWN0aW9uSXRlbXM6IEhUTUxFbGVtZW50W10gPSBnZXRTZWxlY3RhYmxlQ2VsbHMocGFyZW50RWxlbWVudClcbiAgICAgICAgaWYgKCFuZXdDb2xsZWN0aW9uSXRlbXMubGVuZ3RoKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICBpZiAoIXJvb3RDb250ZXh0LnBhZ2VkTmF2aWdhdGlvbi52YWx1ZSAmJiByb290Q29udGV4dC5udW1iZXJPZk1vbnRocy52YWx1ZSA+IDEpIHtcbiAgICAgICAgLy8gUGxhY2Vob2xkZXIgaXMgc2V0IHRvIGZpcnN0IG1vbnRoIG9mIHRoZSBuZXcgcGFnZVxuICAgICAgICAgIGNvbnN0IG51bWJlck9mRGF5cyA9IGdldERheXNJbk1vbnRoKHJvb3RDb250ZXh0LnBsYWNlaG9sZGVyLnZhbHVlKVxuICAgICAgICAgIGNvbnN0IGNvbXB1dGVkSW5kZXggPSBudW1iZXJPZkRheXMgLSBNYXRoLmFicyhuZXdJbmRleClcbiAgICAgICAgICBpZiAobmV3Q29sbGVjdGlvbkl0ZW1zW2NvbXB1dGVkSW5kZXhdLmhhc0F0dHJpYnV0ZSgnZGF0YS1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICBzaGlmdEZvY3VzKG5ld0NvbGxlY3Rpb25JdGVtc1tjb21wdXRlZEluZGV4XSwgYWRkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdDb2xsZWN0aW9uSXRlbXNbXG4gICAgICAgICAgICBjb21wdXRlZEluZGV4XG4gICAgICAgICAgXS5mb2N1cygpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcHV0ZWRJbmRleCA9IG5ld0NvbGxlY3Rpb25JdGVtcy5sZW5ndGggLSBNYXRoLmFicyhuZXdJbmRleClcbiAgICAgICAgaWYgKG5ld0NvbGxlY3Rpb25JdGVtc1tjb21wdXRlZEluZGV4XS5oYXNBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZWQnKSkge1xuICAgICAgICAgIHNoaWZ0Rm9jdXMobmV3Q29sbGVjdGlvbkl0ZW1zW2NvbXB1dGVkSW5kZXhdLCBhZGQpXG4gICAgICAgIH1cbiAgICAgICAgbmV3Q29sbGVjdGlvbkl0ZW1zW1xuICAgICAgICAgIGNvbXB1dGVkSW5kZXhcbiAgICAgICAgXS5mb2N1cygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKG5ld0luZGV4ID49IGFsbENvbGxlY3Rpb25JdGVtcy5sZW5ndGgpIHtcbiAgICAgIGlmIChyb290Q29udGV4dC5pc05leHRCdXR0b25EaXNhYmxlZCgpKVxuICAgICAgICByZXR1cm5cbiAgICAgIHJvb3RDb250ZXh0Lm5leHRQYWdlKClcbiAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q29sbGVjdGlvbkl0ZW1zOiBIVE1MRWxlbWVudFtdID0gZ2V0U2VsZWN0YWJsZUNlbGxzKHBhcmVudEVsZW1lbnQpXG4gICAgICAgIGlmICghbmV3Q29sbGVjdGlvbkl0ZW1zLmxlbmd0aClcbiAgICAgICAgICByZXR1cm5cblxuICAgICAgICBpZiAoIXJvb3RDb250ZXh0LnBhZ2VkTmF2aWdhdGlvbi52YWx1ZSAmJiByb290Q29udGV4dC5udW1iZXJPZk1vbnRocy52YWx1ZSA+IDEpIHtcbiAgICAgICAgLy8gUGxhY2Vob2xkZXIgaXMgc2V0IHRvIGZpcnN0IG1vbnRoIG9mIHRoZSBuZXcgcGFnZVxuICAgICAgICAgIGNvbnN0IG51bWJlck9mRGF5cyA9IGdldERheXNJbk1vbnRoKFxuICAgICAgICAgICAgcm9vdENvbnRleHQucGxhY2Vob2xkZXIudmFsdWUuYWRkKHsgbW9udGhzOiByb290Q29udGV4dC5udW1iZXJPZk1vbnRocy52YWx1ZSAtIDEgfSksXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgY29uc3QgY29tcHV0ZWRJbmRleCA9IG5ld0luZGV4IC0gYWxsQ29sbGVjdGlvbkl0ZW1zLmxlbmd0aCArIChuZXdDb2xsZWN0aW9uSXRlbXMubGVuZ3RoIC0gbnVtYmVyT2ZEYXlzKVxuXG4gICAgICAgICAgaWYgKG5ld0NvbGxlY3Rpb25JdGVtc1tjb21wdXRlZEluZGV4XS5oYXNBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgc2hpZnRGb2N1cyhuZXdDb2xsZWN0aW9uSXRlbXNbY29tcHV0ZWRJbmRleF0sIGFkZClcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3Q29sbGVjdGlvbkl0ZW1zW2NvbXB1dGVkSW5kZXhdLmZvY3VzKClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbXB1dGVkSW5kZXggPSBuZXdJbmRleCAtIGFsbENvbGxlY3Rpb25JdGVtcy5sZW5ndGhcbiAgICAgICAgaWYgKG5ld0NvbGxlY3Rpb25JdGVtc1tjb21wdXRlZEluZGV4XS5oYXNBdHRyaWJ1dGUoJ2RhdGEtZGlzYWJsZWQnKSkge1xuICAgICAgICAgIHNoaWZ0Rm9jdXMobmV3Q29sbGVjdGlvbkl0ZW1zW2NvbXB1dGVkSW5kZXhdLCBhZGQpXG4gICAgICAgIH1cblxuICAgICAgICBuZXdDb2xsZWN0aW9uSXRlbXNbY29tcHV0ZWRJbmRleF0uZm9jdXMoKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbjwvc2NyaXB0PlxuXG48dGVtcGxhdGU+XG4gIDxQcmltaXRpdmVcbiAgICByZWY9XCJwcmltaXRpdmVFbGVtZW50XCJcbiAgICB2LWJpbmQ9XCJwcm9wc1wiXG4gICAgcm9sZT1cImJ1dHRvblwiXG4gICAgOmFyaWEtbGFiZWw9XCJsYWJlbFRleHRcIlxuICAgIGRhdGEtcmVrYS1jYWxlbmRhci1jZWxsLXRyaWdnZXJcbiAgICA6YXJpYS1kaXNhYmxlZD1cImlzRGlzYWJsZWQgfHwgaXNVbmF2YWlsYWJsZSA/IHRydWUgOiB1bmRlZmluZWRcIlxuICAgIDpkYXRhLXNlbGVjdGVkPVwiaXNTZWxlY3RlZERhdGUgPyB0cnVlIDogdW5kZWZpbmVkXCJcbiAgICA6ZGF0YS12YWx1ZT1cImRheS50b1N0cmluZygpXCJcbiAgICA6ZGF0YS1kaXNhYmxlZD1cImlzRGlzYWJsZWQgPyAnJyA6IHVuZGVmaW5lZFwiXG4gICAgOmRhdGEtdW5hdmFpbGFibGU9XCJpc1VuYXZhaWxhYmxlID8gJycgOiB1bmRlZmluZWRcIlxuICAgIDpkYXRhLXRvZGF5PVwiaXNEYXRlVG9kYXkgPyAnJyA6IHVuZGVmaW5lZFwiXG4gICAgOmRhdGEtb3V0c2lkZS12aWV3PVwiaXNPdXRzaWRlVmlldyA/ICcnIDogdW5kZWZpbmVkXCJcbiAgICA6ZGF0YS1vdXRzaWRlLXZpc2libGUtdmlldz1cImlzT3V0c2lkZVZpc2libGVWaWV3ID8gJycgOiB1bmRlZmluZWRcIlxuICAgIDpkYXRhLWZvY3VzZWQ9XCJpc0ZvY3VzZWREYXRlID8gJycgOiB1bmRlZmluZWRcIlxuICAgIDp0YWJpbmRleD1cImlzRm9jdXNlZERhdGUgPyAwIDogaXNPdXRzaWRlVmlldyB8fCBpc0Rpc2FibGVkID8gdW5kZWZpbmVkIDogLTFcIlxuICAgIEBjbGljaz1cImhhbmRsZUNsaWNrXCJcbiAgICBAa2V5ZG93bi51cC5kb3duLmxlZnQucmlnaHQuc3BhY2UuZW50ZXI9XCJoYW5kbGVBcnJvd0tleVwiXG4gICAgQGtleWRvd24uZW50ZXIucHJldmVudFxuICA+XG4gICAgPHNsb3RcbiAgICAgIDpkYXktdmFsdWU9XCJkYXlWYWx1ZVwiXG4gICAgICA6ZGlzYWJsZWQ9XCJpc0Rpc2FibGVkXCJcbiAgICAgIDp0b2RheT1cImlzRGF0ZVRvZGF5XCJcbiAgICAgIDpzZWxlY3RlZD1cImlzU2VsZWN0ZWREYXRlXCJcbiAgICAgIDpvdXRzaWRlLXZpZXc9XCJpc091dHNpZGVWaWV3XCJcbiAgICAgIDpvdXRzaWRlLXZpc2libGUtdmlldz1cImlzT3V0c2lkZVZpc2libGVWaWV3XCJcbiAgICAgIDp1bmF2YWlsYWJsZT1cImlzVW5hdmFpbGFibGVcIlxuICAgID5cbiAgICAgIHt7IGRheVZhbHVlIH19XG4gICAgPC9zbG90PlxuICA8L1ByaW1pdGl2ZT5cbjwvdGVtcGxhdGU+XG4iXSwibmFtZXMiOlsiY29tcHV0ZWRJbmRleCJdLCJtYXBwaW5n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QVEsQ0FBQTtBQUNuRSxZQUFBLElBQUksa0JBQW1CLENBQUEsYUFBYSxDQUFFLENBQUEsWUFBQSxDQUFhLGVBQWUsQ0FBRyxFQUFBO0FBQ25FLGNBQVcsVUFBQSxDQUFBLGtCQUFBLENBQW1CLGFBQWEsQ0FBQSxFQUFHLEdBQUcsQ0FBQTtBQUFBO0FBRW5ELFlBQ0Usa0JBQUEsQ0FBQSxhQUNGLEVBQUUsS0FBTSxFQUFBO0FBQUEsV0FDVCxDQUFBO0FBQ0QsVUFBQTtBQUFBO0FBR0YsUUFBSSxJQUFBLFFBQUEsSUFBWSxtQkFBbUIsTUFBUSxFQUFBO0FBQ3pDLFVBQUEsSUFBSSxZQUFZLG9CQUFxQixFQUFBO0FBQ25DLFlBQUE7QUFDRixVQUFBLFdBQUEsQ0FBWSxRQUFTLEVBQUE7QUFDckIsVUFBQSxRQUFBLENBQVMsTUFBTTtBQUNiLFlBQU0sTUFBQSxrQkFBQSxHQUFvQyxtQkFBbUIsYUFBYSxDQUFBO0FBQzFFLFlBQUEsSUFBSSxDQUFDLGtCQUFtQixDQUFBLE1BQUE7QUFDdEIsY0FBQTtBQUVGLFlBQUEsSUFBSSxDQUFDLFdBQVksQ0FBQSxlQUFBLENBQWdCLFNBQVMsV0FBWSxDQUFBLGNBQUEsQ0FBZSxRQUFRLENBQUcsRUFBQTtBQUU5RSxjQUFBLE1BQU0sWUFBZSxHQUFBLGNBQUE7QUFBQSxnQkFDbkIsV0FBQSxDQUFZLFdBQVksQ0FBQSxLQUFBLENBQU0sR0FBSSxDQUFBLEVBQUUsUUFBUSxXQUFZLENBQUEsY0FBQSxDQUFlLEtBQVEsR0FBQSxDQUFBLEVBQUc7QUFBQSxlQUNwRjtBQUVBLGNBQUEsTUFBTUEsY0FBZ0IsR0FBQSxRQUFBLEdBQVcsa0JBQW1CLENBQUEsTUFBQSxJQUFVLG1CQUFtQixNQUFTLEdBQUEsWUFBQSxDQUFBO0FBRTFGLGNBQUEsSUFBSSxrQkFBbUJBLENBQUFBLGNBQWEsQ0FBRSxDQUFBLFlBQUEsQ0FBYSxlQUFlLENBQUcsRUFBQTtBQUNuRSxnQkFBVyxVQUFBLENBQUEsa0JBQUEsQ0FBbUJBLGNBQWEsQ0FBQSxFQUFHLEdBQUcsQ0FBQTtBQUFBO0FBRW5ELGNBQW1CQSxrQkFBQUEsQ0FBQUEsY0FBYSxFQUFFLEtBQU0sRUFBQTtBQUN4QyxjQUFBO0FBQUE7QUFHRixZQUFNLE1BQUEsYUFBQSxHQUFnQixXQUFXLGtCQUFtQixDQUFBLE1BQUE7QUFDcEQsWUFBQSxJQUFJLGtCQUFtQixDQUFBLGFBQWEsQ0FBRSxDQUFBLFlBQUEsQ0FBYSxlQUFlLENBQUcsRUFBQTtBQUNuRSxjQUFXLFVBQUEsQ0FBQSxrQkFBQSxDQUFtQixhQUFhLENBQUEsRUFBRyxHQUFHLENBQUE7QUFBQTtBQUduRCxZQUFtQixrQkFBQSxDQUFBLGFBQWEsRUFBRSxLQUFNLEVBQUE7QUFBQSxXQUN6QyxDQUFBO0FBQUE7QUFDSDtBQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19