import { defineComponent, toRefs, ref, computed, reactive, watch, nextTick, getCurrentInstance, onMounted, createBlock, openBlock, unref, withCtx, createVNode, mergeProps, isRef, renderSlot } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/vue/dist/vue.runtime.esm-bundler.js?v=b7258a77";
import { useVModel, createEventHook } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/.cache/vite/client/deps/@vueuse_core.js?v=b7258a77";
import { _ as _sfc_main$1 } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/Popper/PopperRoot.js?v=b7258a77";
import { c as createContext } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/shared/createContext.js?v=b7258a77";
import { u as usePrimitiveElement } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/Primitive/usePrimitiveElement.js?v=b7258a77";
import { u as useDirection } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/shared/useDirection.js?v=b7258a77";
import { u as useFilter } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/shared/useFilter.js?v=b7258a77";
import { _ as _sfc_main$2 } from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/reka-ui/dist/Listbox/ListboxRoot.js?v=b7258a77";

const [injectComboboxRootContext, provideComboboxRootContext] = createContext("ComboboxRoot");
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "ComboboxRoot",
  props: {
    open: { type: Boolean, default: void 0 },
    defaultOpen: { type: Boolean },
    resetSearchTermOnBlur: { type: Boolean, default: true },
    resetSearchTermOnSelect: { type: Boolean, default: true },
    ignoreFilter: { type: Boolean },
    modelValue: {},
    defaultValue: {},
    multiple: { type: Boolean },
    dir: {},
    disabled: { type: Boolean },
    highlightOnHover: { type: Boolean },
    by: {},
    asChild: { type: Boolean },
    as: {},
    name: {},
    required: { type: Boolean }
  },
  emits: ["update:modelValue", "highlight", "update:open"],
  setup(__props, { expose: __expose, emit: __emit }) {
    const props = __props;
    const emits = __emit;
    const { primitiveElement, currentElement: parentElement } = usePrimitiveElement();
    const { multiple, disabled, ignoreFilter, resetSearchTermOnSelect, dir: propDir } = toRefs(props);
    const dir = useDirection(propDir);
    const modelValue = useVModel(props, "modelValue", emits, {
      defaultValue: props.defaultValue ?? (multiple.value ? [] : void 0),
      passive: props.modelValue === void 0,
      deep: true
    });
    const open = useVModel(props, "open", emits, {
      defaultValue: props.defaultOpen,
      passive: props.open === void 0
    });
    async function onOpenChange(val) {
      open.value = val;
      filterState.search = "";
      if (val) {
        await nextTick();
        primitiveElement.value?.highlightSelected();
        isUserInputted.value = true;
      } else {
        isUserInputted.value = false;
      }
      inputElement.value?.focus();
      setTimeout(() => {
        if (!val && props.resetSearchTermOnBlur)
          resetSearchTerm.trigger();
      }, 1);
    }
    const resetSearchTerm = createEventHook();
    const isUserInputted = ref(false);
    const isVirtual = ref(false);
    const inputElement = ref();
    const triggerElement = ref();
    const highlightedElement = computed(() => primitiveElement.value?.highlightedElement ?? void 0);
    const allItems = ref(/* @__PURE__ */ new Map());
    const allGroups = ref(/* @__PURE__ */ new Map());
    const { contains } = useFilter({ sensitivity: "base" });
    const filterState = reactive({
      search: "",
      filtered: {
        /** The count of all visible items. */
        count: 0,
        /** Map from visible item id to its search score. */
        items: /* @__PURE__ */ new Map(),
        /** Set of groups with at least one visible item. */
        groups: /* @__PURE__ */ new Set()
      }
    });
    function filterItems() {
      if (!filterState.search || props.ignoreFilter || isVirtual.value) {
        filterState.filtered.count = allItems.value.size;
        return;
      }
      filterState.filtered.groups = /* @__PURE__ */ new Set();
      let itemCount = 0;
      for (const [id, value] of allItems.value) {
        const score = contains(value, filterState.search);
        filterState.filtered.items.set(id, score ? 1 : 0);
        if (score)
          itemCount++;
      }
      for (const [groupId, group] of allGroups.value) {
        for (const itemId of group) {
          if (filterState.filtered.items.get(itemId) > 0) {
            filterState.filtered.groups.add(groupId);
            break;
          }
        }
      }
      filterState.filtered.count = itemCount;
    }
    watch([() => filterState.search, () => allItems.value.size], () => {
      filterItems();
    }, { immediate: true });
    watch(() => open.value, () => {
      nextTick(() => {
        if (open.value)
          filterItems();
      });
    }, { flush: "post" });
    const inst = getCurrentInstance();
    onMounted(() => {
      if (inst?.exposed) {
        inst.exposed.highlightItem = primitiveElement.value?.highlightItem;
        inst.exposed.highlightFirstItem = primitiveElement.value?.highlightFirstItem;
        inst.exposed.highlightSelected = primitiveElement.value?.highlightSelected;
      }
    });
    __expose({
      filtered: computed(() => filterState.filtered),
      highlightedElement,
      highlightItem: primitiveElement.value?.highlightItem,
      highlightFirstItem: primitiveElement.value?.highlightFirstItem,
      highlightSelected: primitiveElement.value?.highlightSelected
    });
    provideComboboxRootContext({
      modelValue,
      multiple,
      disabled,
      open,
      onOpenChange,
      contentId: "",
      isUserInputted,
      isVirtual,
      inputElement,
      highlightedElement,
      onInputElementChange: (val) => inputElement.value = val,
      triggerElement,
      onTriggerElementChange: (val) => triggerElement.value = val,
      parentElement,
      resetSearchTermOnSelect,
      onResetSearchTerm: resetSearchTerm.on,
      allItems,
      allGroups,
      filterState,
      ignoreFilter
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(_sfc_main$1), null, {
        default: withCtx(() => [
          createVNode(unref(_sfc_main$2), mergeProps({
            ref_key: "primitiveElement",
            ref: primitiveElement
          }, _ctx.$attrs, {
            modelValue: unref(modelValue),
            "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => isRef(modelValue) ? modelValue.value = $event : null),
            style: {
              pointerEvents: unref(open) ? "auto" : void 0
            },
            as: _ctx.as,
            "as-child": _ctx.asChild,
            dir: unref(dir),
            multiple: unref(multiple),
            name: _ctx.name,
            required: _ctx.required,
            disabled: unref(disabled),
            "highlight-on-hover": true,
            by: props.by,
            onHighlight: _cache[1] || (_cache[1] = ($event) => emits("highlight", $event))
          }), {
            default: withCtx(() => [
              renderSlot(_ctx.$slots, "default", {
                open: unref(open),
                modelValue: unref(modelValue)
              })
            ]),
            _: 3
          }, 16, ["modelValue", "style", "as", "as-child", "dir", "multiple", "name", "required", "disabled", "by"])
        ]),
        _: 3
      });
    };
  }
});

export { _sfc_main as _, injectComboboxRootContext as i };
                                        

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tYm9ib3hSb290LmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvQ29tYm9ib3gvQ29tYm9ib3hSb290LnZ1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHR5cGUgeyBSZWYgfSBmcm9tICd2dWUnXG5pbXBvcnQgdHlwZSB7IExpc3Rib3hSb290UHJvcHMgfSBmcm9tICdAL0xpc3Rib3gnXG5pbXBvcnQgdHlwZSB7IEFjY2VwdGFibGVWYWx1ZSwgR2VuZXJpY0NvbXBvbmVudEluc3RhbmNlIH0gZnJvbSAnQC9zaGFyZWQvdHlwZXMnXG5pbXBvcnQgeyB1c2VQcmltaXRpdmVFbGVtZW50IH0gZnJvbSAnQC9QcmltaXRpdmUnXG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VEaXJlY3Rpb24sIHVzZUZpbHRlciB9IGZyb20gJ0Avc2hhcmVkJ1xuXG50eXBlIENvbWJvYm94Um9vdENvbnRleHQ8VD4gPSB7XG4gIG1vZGVsVmFsdWU6IFJlZjxUIHwgQXJyYXk8VD4+XG4gIG11bHRpcGxlOiBSZWY8Ym9vbGVhbj5cbiAgZGlzYWJsZWQ6IFJlZjxib29sZWFuPlxuICBvcGVuOiBSZWY8Ym9vbGVhbj5cbiAgb25PcGVuQ2hhbmdlOiAodmFsdWU6IGJvb2xlYW4pID0+IHZvaWRcbiAgaXNVc2VySW5wdXR0ZWQ6IFJlZjxib29sZWFuPlxuICBpc1ZpcnR1YWw6IFJlZjxib29sZWFuPlxuICBjb250ZW50SWQ6IHN0cmluZ1xuICBpbnB1dEVsZW1lbnQ6IFJlZjxIVE1MSW5wdXRFbGVtZW50IHwgdW5kZWZpbmVkPlxuICBvbklucHV0RWxlbWVudENoYW5nZTogKGVsOiBIVE1MSW5wdXRFbGVtZW50KSA9PiB2b2lkXG4gIHRyaWdnZXJFbGVtZW50OiBSZWY8SFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ+XG4gIG9uVHJpZ2dlckVsZW1lbnRDaGFuZ2U6IChlbDogSFRNTEVsZW1lbnQpID0+IHZvaWRcbiAgaGlnaGxpZ2h0ZWRFbGVtZW50OiBSZWY8SFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ+XG4gIHBhcmVudEVsZW1lbnQ6IFJlZjxIVE1MRWxlbWVudCB8IHVuZGVmaW5lZD5cbiAgcmVzZXRTZWFyY2hUZXJtT25TZWxlY3Q6IFJlZjxib29sZWFuPlxuICBvblJlc2V0U2VhcmNoVGVybTogRXZlbnRIb29rT25cbiAgYWxsSXRlbXM6IFJlZjxNYXA8c3RyaW5nLCBzdHJpbmc+PlxuICBhbGxHcm91cHM6IFJlZjxNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4+XG4gIGZpbHRlclN0YXRlOiB7XG4gICAgc2VhcmNoOiBzdHJpbmdcbiAgICBmaWx0ZXJlZDogeyBjb3VudDogbnVtYmVyLCBpdGVtczogTWFwPHN0cmluZywgbnVtYmVyPiwgZ3JvdXBzOiBTZXQ8c3RyaW5nPiB9XG4gIH1cbiAgaWdub3JlRmlsdGVyOiBSZWY8Ym9vbGVhbj5cbn1cblxuZXhwb3J0IGNvbnN0IFtpbmplY3RDb21ib2JveFJvb3RDb250ZXh0LCBwcm92aWRlQ29tYm9ib3hSb290Q29udGV4dF1cbiAgPSBjcmVhdGVDb250ZXh0PENvbWJvYm94Um9vdENvbnRleHQ8QWNjZXB0YWJsZVZhbHVlPj4oJ0NvbWJvYm94Um9vdCcpXG5cbmV4cG9ydCB0eXBlIENvbWJvYm94Um9vdEVtaXRzPFQgPSBBY2NlcHRhYmxlVmFsdWU+ID0ge1xuICAvKiogRXZlbnQgaGFuZGxlciBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gKi9cbiAgJ3VwZGF0ZTptb2RlbFZhbHVlJzogW3ZhbHVlOiBUXVxuICAvKiogRXZlbnQgaGFuZGxlciB3aGVuIGhpZ2hsaWdodGVkIGVsZW1lbnQgY2hhbmdlcy4gKi9cbiAgJ2hpZ2hsaWdodCc6IFtwYXlsb2FkOiB7IHJlZjogSFRNTEVsZW1lbnQsIHZhbHVlOiBUIH0gfCB1bmRlZmluZWRdXG4gIC8qKiBFdmVudCBoYW5kbGVyIGNhbGxlZCB3aGVuIHRoZSBvcGVuIHN0YXRlIG9mIHRoZSBjb21ib2JveCBjaGFuZ2VzLiAqL1xuICAndXBkYXRlOm9wZW4nOiBbdmFsdWU6IGJvb2xlYW5dXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tYm9ib3hSb290UHJvcHM8VCA9IEFjY2VwdGFibGVWYWx1ZT4gZXh0ZW5kcyBPbWl0PExpc3Rib3hSb290UHJvcHM8VD4sICdvcmllbnRhdGlvbicgfCAnc2VsZWN0aW9uQmVoYXZpb3InPiB7XG4gIC8qKiBUaGUgY29udHJvbGxlZCBvcGVuIHN0YXRlIG9mIHRoZSBDb21ib2JveC4gQ2FuIGJlIGJpbmRlZCB3aXRoIHdpdGggYHYtbW9kZWw6b3BlbmAuICovXG4gIG9wZW4/OiBib29sZWFuXG4gIC8qKiBUaGUgb3BlbiBzdGF0ZSBvZiB0aGUgY29tYm9ib3ggd2hlbiBpdCBpcyBpbml0aWFsbHkgcmVuZGVyZWQuIDxicj4gVXNlIHdoZW4geW91IGRvIG5vdCBuZWVkIHRvIGNvbnRyb2wgaXRzIG9wZW4gc3RhdGUuICovXG4gIGRlZmF1bHRPcGVuPzogYm9vbGVhblxuICAvKipcbiAgICogV2hldGhlciB0byByZXNldCB0aGUgc2VhcmNoVGVybSB3aGVuIHRoZSBDb21ib2JveCBpbnB1dCBibHVycmVkXG4gICAqIEBkZWZhdWx0VmFsdWUgYHRydWVgXG4gICAqL1xuICByZXNldFNlYXJjaFRlcm1PbkJsdXI/OiBib29sZWFuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHJlc2V0IHRoZSBzZWFyY2hUZXJtIHdoZW4gdGhlIENvbWJvYm94IHZhbHVlIGlzIHNlbGVjdGVkXG4gICAqIEBkZWZhdWx0VmFsdWUgYHRydWVgXG4gICAqL1xuICByZXNldFNlYXJjaFRlcm1PblNlbGVjdD86IGJvb2xlYW5cbiAgLyoqXG4gICAqIFdoZW4gYHRydWVgLCBkaXNhYmxlIHRoZSBkZWZhdWx0IGZpbHRlcnNcbiAgICovXG4gIGlnbm9yZUZpbHRlcj86IGJvb2xlYW5cbn1cbjwvc2NyaXB0PlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiIGdlbmVyaWM9XCJUIGV4dGVuZHMgQWNjZXB0YWJsZVZhbHVlID0gQWNjZXB0YWJsZVZhbHVlXCI+XG5pbXBvcnQgdHlwZSB7IEV2ZW50SG9va09uIH0gZnJvbSAnQHZ1ZXVzZS9jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlRXZlbnRIb29rLCB1c2VWTW9kZWwgfSBmcm9tICdAdnVldXNlL2NvcmUnXG5pbXBvcnQgeyBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlLCBuZXh0VGljaywgb25Nb3VudGVkLCByZWFjdGl2ZSwgcmVmLCB0b1JlZnMsIHdhdGNoIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgTGlzdGJveFJvb3QgfSBmcm9tICdAL0xpc3Rib3gnXG5pbXBvcnQgeyBQb3BwZXJSb290IH0gZnJvbSAnQC9Qb3BwZXInXG5cbmNvbnN0IHByb3BzID0gd2l0aERlZmF1bHRzKGRlZmluZVByb3BzPENvbWJvYm94Um9vdFByb3BzPFQ+PigpLCB7XG4gIG9wZW46IHVuZGVmaW5lZCxcbiAgcmVzZXRTZWFyY2hUZXJtT25CbHVyOiB0cnVlLFxuICByZXNldFNlYXJjaFRlcm1PblNlbGVjdDogdHJ1ZSxcbn0pXG5jb25zdCBlbWl0cyA9IGRlZmluZUVtaXRzPENvbWJvYm94Um9vdEVtaXRzPFQ+PigpXG5cbmRlZmluZVNsb3RzPHtcbiAgZGVmYXVsdD86IChwcm9wczoge1xuICAgIC8qKiBDdXJyZW50IG9wZW4gc3RhdGUgKi9cbiAgICBvcGVuOiB0eXBlb2Ygb3Blbi52YWx1ZVxuICAgIC8qKiBDdXJyZW50IGFjdGl2ZSB2YWx1ZSAqL1xuICAgIG1vZGVsVmFsdWU6IHR5cGVvZiBtb2RlbFZhbHVlLnZhbHVlXG4gIH0pID0+IGFueVxufT4oKVxuXG5jb25zdCB7IHByaW1pdGl2ZUVsZW1lbnQsIGN1cnJlbnRFbGVtZW50OiBwYXJlbnRFbGVtZW50IH0gPSB1c2VQcmltaXRpdmVFbGVtZW50PEdlbmVyaWNDb21wb25lbnRJbnN0YW5jZTx0eXBlb2YgTGlzdGJveFJvb3Q+PigpXG5jb25zdCB7IG11bHRpcGxlLCBkaXNhYmxlZCwgaWdub3JlRmlsdGVyLCByZXNldFNlYXJjaFRlcm1PblNlbGVjdCwgZGlyOiBwcm9wRGlyIH0gPSB0b1JlZnMocHJvcHMpXG5cbmNvbnN0IGRpciA9IHVzZURpcmVjdGlvbihwcm9wRGlyKVxuXG5jb25zdCBtb2RlbFZhbHVlID0gdXNlVk1vZGVsKHByb3BzIGFzIENvbWJvYm94Um9vdFByb3BzPFQ+LCAnbW9kZWxWYWx1ZScsIGVtaXRzLCB7XG4gIGRlZmF1bHRWYWx1ZTogcHJvcHMuZGVmYXVsdFZhbHVlID8/IChtdWx0aXBsZS52YWx1ZSA/IFtdIDogdW5kZWZpbmVkKSxcbiAgcGFzc2l2ZTogKHByb3BzLm1vZGVsVmFsdWUgPT09IHVuZGVmaW5lZCkgYXMgZmFsc2UsXG4gIGRlZXA6IHRydWUsXG59KSBhcyBSZWY8VCB8IFRbXT5cblxuY29uc3Qgb3BlbiA9IHVzZVZNb2RlbChwcm9wcywgJ29wZW4nLCBlbWl0cywge1xuICBkZWZhdWx0VmFsdWU6IHByb3BzLmRlZmF1bHRPcGVuLFxuICBwYXNzaXZlOiAocHJvcHMub3BlbiA9PT0gdW5kZWZpbmVkKSBhcyBmYWxzZSxcbn0pIGFzIFJlZjxib29sZWFuPlxuXG5hc3luYyBmdW5jdGlvbiBvbk9wZW5DaGFuZ2UodmFsOiBib29sZWFuKSB7XG4gIG9wZW4udmFsdWUgPSB2YWxcbiAgZmlsdGVyU3RhdGUuc2VhcmNoID0gJydcblxuICBpZiAodmFsKSB7XG4gICAgLy8gbWFrZSBzdXJlIGRvbSBpcyByZWFkeSB0aGVuIG9ubHkgaGlnaGxpZ2h0IHRoZSBzZWxlY3RlZFxuICAgIGF3YWl0IG5leHRUaWNrKClcbiAgICBwcmltaXRpdmVFbGVtZW50LnZhbHVlPy5oaWdobGlnaHRTZWxlY3RlZCgpXG4gICAgaXNVc2VySW5wdXR0ZWQudmFsdWUgPSB0cnVlXG4gIH1cbiAgZWxzZSB7XG4gICAgaXNVc2VySW5wdXR0ZWQudmFsdWUgPSBmYWxzZVxuICB9XG5cbiAgaW5wdXRFbGVtZW50LnZhbHVlPy5mb2N1cygpXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGlmICghdmFsICYmIHByb3BzLnJlc2V0U2VhcmNoVGVybU9uQmx1cilcbiAgICAgIHJlc2V0U2VhcmNoVGVybS50cmlnZ2VyKClcbiAgfSwgMSlcbn1cblxuY29uc3QgcmVzZXRTZWFyY2hUZXJtID0gY3JlYXRlRXZlbnRIb29rKClcbmNvbnN0IGlzVXNlcklucHV0dGVkID0gcmVmKGZhbHNlKVxuY29uc3QgaXNWaXJ0dWFsID0gcmVmKGZhbHNlKVxuY29uc3QgaW5wdXRFbGVtZW50ID0gcmVmPEhUTUxJbnB1dEVsZW1lbnQ+KClcbmNvbnN0IHRyaWdnZXJFbGVtZW50ID0gcmVmPEhUTUxFbGVtZW50PigpXG5cbmNvbnN0IGhpZ2hsaWdodGVkRWxlbWVudCA9IGNvbXB1dGVkKCgpID0+IHByaW1pdGl2ZUVsZW1lbnQudmFsdWU/LmhpZ2hsaWdodGVkRWxlbWVudCA/PyB1bmRlZmluZWQpXG5cbmNvbnN0IGFsbEl0ZW1zID0gcmVmPE1hcDxzdHJpbmcsIHN0cmluZz4+KG5ldyBNYXAoKSlcbmNvbnN0IGFsbEdyb3VwcyA9IHJlZjxNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4+KG5ldyBNYXAoKSlcblxuY29uc3QgeyBjb250YWlucyB9ID0gdXNlRmlsdGVyKHsgc2Vuc2l0aXZpdHk6ICdiYXNlJyB9KVxuY29uc3QgZmlsdGVyU3RhdGUgPSByZWFjdGl2ZSh7XG4gIHNlYXJjaDogJycsXG4gIGZpbHRlcmVkOiB7XG4gICAgLyoqIFRoZSBjb3VudCBvZiBhbGwgdmlzaWJsZSBpdGVtcy4gKi9cbiAgICBjb3VudDogMCxcbiAgICAvKiogTWFwIGZyb20gdmlzaWJsZSBpdGVtIGlkIHRvIGl0cyBzZWFyY2ggc2NvcmUuICovXG4gICAgaXRlbXM6IG5ldyBNYXAoKSBhcyBNYXA8c3RyaW5nLCBudW1iZXI+LFxuICAgIC8qKiBTZXQgb2YgZ3JvdXBzIHdpdGggYXQgbGVhc3Qgb25lIHZpc2libGUgaXRlbS4gKi9cbiAgICBncm91cHM6IG5ldyBTZXQoKSBhcyBTZXQ8c3RyaW5nPixcbiAgfSxcbn0pXG5cbmZ1bmN0aW9uIGZpbHRlckl0ZW1zKCkge1xuICBpZiAoIWZpbHRlclN0YXRlLnNlYXJjaCB8fCBwcm9wcy5pZ25vcmVGaWx0ZXIgfHwgaXNWaXJ0dWFsLnZhbHVlKSB7XG4gICAgZmlsdGVyU3RhdGUuZmlsdGVyZWQuY291bnQgPSBhbGxJdGVtcy52YWx1ZS5zaXplXG4gICAgLy8gRG8gbm90aGluZywgZWFjaCBpdGVtIHdpbGwga25vdyB0byBzaG93IGl0c2VsZiBiZWNhdXNlIHNlYXJjaCBpcyBlbXB0eVxuICAgIHJldHVyblxuICB9XG5cbiAgLy8gUmVzZXQgdGhlIGdyb3Vwc1xuICBmaWx0ZXJTdGF0ZS5maWx0ZXJlZC5ncm91cHMgPSBuZXcgU2V0KClcbiAgbGV0IGl0ZW1Db3VudCA9IDBcblxuICAvLyBDaGVjayB3aGljaCBpdGVtcyBzaG91bGQgYmUgaW5jbHVkZWRcbiAgZm9yIChjb25zdCBbaWQsIHZhbHVlXSBvZiBhbGxJdGVtcy52YWx1ZSkge1xuICAgIGNvbnN0IHNjb3JlID0gY29udGFpbnModmFsdWUsIGZpbHRlclN0YXRlLnNlYXJjaClcbiAgICBmaWx0ZXJTdGF0ZS5maWx0ZXJlZC5pdGVtcy5zZXQoaWQsIHNjb3JlID8gMSA6IDApXG4gICAgaWYgKHNjb3JlKVxuICAgICAgaXRlbUNvdW50KytcbiAgfVxuXG4gIC8vIENoZWNrIHdoaWNoIGdyb3VwcyBoYXZlIGF0IGxlYXN0IDEgaXRlbSBzaG93blxuICBmb3IgKGNvbnN0IFtncm91cElkLCBncm91cF0gb2YgYWxsR3JvdXBzLnZhbHVlKSB7XG4gICAgZm9yIChjb25zdCBpdGVtSWQgb2YgZ3JvdXApIHtcbiAgICAgIGlmIChmaWx0ZXJTdGF0ZS5maWx0ZXJlZC5pdGVtcy5nZXQoaXRlbUlkKSEgPiAwKSB7XG4gICAgICAgIGZpbHRlclN0YXRlLmZpbHRlcmVkLmdyb3Vwcy5hZGQoZ3JvdXBJZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmaWx0ZXJTdGF0ZS5maWx0ZXJlZC5jb3VudCA9IGl0ZW1Db3VudFxufVxuXG53YXRjaChbKCkgPT4gZmlsdGVyU3RhdGUuc2VhcmNoLCAoKSA9PiBhbGxJdGVtcy52YWx1ZS5zaXplXSwgKCkgPT4ge1xuICBmaWx0ZXJJdGVtcygpXG59LCB7IGltbWVkaWF0ZTogdHJ1ZSB9KVxuXG53YXRjaCgoKSA9PiBvcGVuLnZhbHVlLCAoKSA9PiB7XG4gIC8vIG5leHRUaWNrIHRvIGFsbG93IG11bHRpcGxlIGl0ZW1zIHRvIGJlIG1vdW50ZWQgZmlyc3RcbiAgbmV4dFRpY2soKCkgPT4ge1xuICAgIGlmIChvcGVuLnZhbHVlKVxuICAgICAgZmlsdGVySXRlbXMoKVxuICB9KVxufSwgeyBmbHVzaDogJ3Bvc3QnIH0pXG5cbmNvbnN0IGluc3QgPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxub25Nb3VudGVkKCgpID0+IHtcbiAgaWYgKGluc3Q/LmV4cG9zZWQpIHtcbiAgICBpbnN0LmV4cG9zZWQuaGlnaGxpZ2h0SXRlbSA9IHByaW1pdGl2ZUVsZW1lbnQudmFsdWU/LmhpZ2hsaWdodEl0ZW1cbiAgICBpbnN0LmV4cG9zZWQuaGlnaGxpZ2h0Rmlyc3RJdGVtID0gcHJpbWl0aXZlRWxlbWVudC52YWx1ZT8uaGlnaGxpZ2h0Rmlyc3RJdGVtXG4gICAgaW5zdC5leHBvc2VkLmhpZ2hsaWdodFNlbGVjdGVkID0gcHJpbWl0aXZlRWxlbWVudC52YWx1ZT8uaGlnaGxpZ2h0U2VsZWN0ZWRcbiAgfVxufSlcblxuZGVmaW5lRXhwb3NlKHtcbiAgZmlsdGVyZWQ6IGNvbXB1dGVkKCgpID0+IGZpbHRlclN0YXRlLmZpbHRlcmVkKSxcbiAgaGlnaGxpZ2h0ZWRFbGVtZW50LFxuICBoaWdobGlnaHRJdGVtOiBwcmltaXRpdmVFbGVtZW50LnZhbHVlPy5oaWdobGlnaHRJdGVtLFxuICBoaWdobGlnaHRGaXJzdEl0ZW06IHByaW1pdGl2ZUVsZW1lbnQudmFsdWU/LmhpZ2hsaWdodEZpcnN0SXRlbSxcbiAgaGlnaGxpZ2h0U2VsZWN0ZWQ6IHByaW1pdGl2ZUVsZW1lbnQudmFsdWU/LmhpZ2hsaWdodFNlbGVjdGVkLFxufSlcblxucHJvdmlkZUNvbWJvYm94Um9vdENvbnRleHQoe1xuICBtb2RlbFZhbHVlLFxuICBtdWx0aXBsZSxcbiAgZGlzYWJsZWQsXG4gIG9wZW4sXG4gIG9uT3BlbkNoYW5nZSxcbiAgY29udGVudElkOiAnJyxcbiAgaXNVc2VySW5wdXR0ZWQsXG4gIGlzVmlydHVhbCxcbiAgaW5wdXRFbGVtZW50LFxuICBoaWdobGlnaHRlZEVsZW1lbnQsXG4gIG9uSW5wdXRFbGVtZW50Q2hhbmdlOiB2YWwgPT4gaW5wdXRFbGVtZW50LnZhbHVlID0gdmFsLFxuICB0cmlnZ2VyRWxlbWVudCxcbiAgb25UcmlnZ2VyRWxlbWVudENoYW5nZTogdmFsID0+IHRyaWdnZXJFbGVtZW50LnZhbHVlID0gdmFsLFxuICBwYXJlbnRFbGVtZW50LFxuICByZXNldFNlYXJjaFRlcm1PblNlbGVjdCxcbiAgb25SZXNldFNlYXJjaFRlcm06IHJlc2V0U2VhcmNoVGVybS5vbixcbiAgYWxsSXRlbXMsXG4gIGFsbEdyb3VwcyxcbiAgZmlsdGVyU3RhdGUsXG4gIGlnbm9yZUZpbHRlcixcbn0pXG48L3NjcmlwdD5cblxuPHRlbXBsYXRlPlxuICA8UG9wcGVyUm9vdD5cbiAgICA8TGlzdGJveFJvb3RcbiAgICAgIHJlZj1cInByaW1pdGl2ZUVsZW1lbnRcIlxuICAgICAgdi1iaW5kPVwiJGF0dHJzXCJcbiAgICAgIHYtbW9kZWw9XCJtb2RlbFZhbHVlXCJcbiAgICAgIDpzdHlsZT1cIntcbiAgICAgICAgcG9pbnRlckV2ZW50czogb3BlbiA/ICdhdXRvJyA6IHVuZGVmaW5lZCxcbiAgICAgIH1cIlxuICAgICAgOmFzPVwiYXNcIlxuICAgICAgOmFzLWNoaWxkPVwiYXNDaGlsZFwiXG4gICAgICA6ZGlyPVwiZGlyXCJcbiAgICAgIDptdWx0aXBsZT1cIm11bHRpcGxlXCJcbiAgICAgIDpuYW1lPVwibmFtZVwiXG4gICAgICA6cmVxdWlyZWQ9XCJyZXF1aXJlZFwiXG4gICAgICA6ZGlzYWJsZWQ9XCJkaXNhYmxlZFwiXG4gICAgICA6aGlnaGxpZ2h0LW9uLWhvdmVyPVwidHJ1ZVwiXG4gICAgICA6Ynk9XCJwcm9wcy5ieSBhcyBhbnlcIlxuICAgICAgQGhpZ2hsaWdodD1cImVtaXRzKCdoaWdobGlnaHQnLCAkZXZlbnQgYXMgYW55KVwiXG4gICAgPlxuICAgICAgPHNsb3RcbiAgICAgICAgOm9wZW49XCJvcGVuXCJcbiAgICAgICAgOm1vZGVsLXZhbHVlPVwibW9kZWxWYWx1ZVwiXG4gICAgICAvPlxuICAgIDwvTGlzdGJveFJvb3Q+XG4gIDwvUG9wcGVyUm9vdD5cbjwvdGVtcGxhdGU+XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBaUNPLE1BQU0sQ0FBQyx5QkFBQSxFQUEyQiwwQkFBMEIsQ0FBQSxHQUMvRCxjQUFvRCxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXdDdEUsSUFBQSxNQUFNLEtBQVEsR0FBQSxPQUFBO0FBS2QsSUFBQSxNQUFNLEtBQVEsR0FBQSxNQUFBO0FBV2QsSUFBQSxNQUFNLEVBQUUsZ0JBQUEsRUFBa0IsY0FBZ0IsRUFBQSxhQUFBLEtBQWtCLG1CQUFrRSxFQUFBO0FBQzlILElBQU0sTUFBQSxFQUFFLFVBQVUsUUFBVSxFQUFBLFlBQUEsRUFBYyx5QkFBeUIsR0FBSyxFQUFBLE9BQUEsRUFBWSxHQUFBLE1BQUEsQ0FBTyxLQUFLLENBQUE7QUFFaEcsSUFBTSxNQUFBLEdBQUEsR0FBTSxhQUFhLE9BQU8sQ0FBQTtBQUVoQyxJQUFBLE1BQU0sVUFBYSxHQUFBLFNBQUEsQ0FBVSxLQUErQixFQUFBLFlBQUEsRUFBYyxLQUFPLEVBQUE7QUFBQSxNQUMvRSxjQUFjLEtBQU0sQ0FBQSxZQUFBLEtBQWlCLFFBQVMsQ0FBQSxLQUFBLEdBQVEsRUFBSyxHQUFBLE1BQUEsQ0FBQTtBQUFBLE1BQzNELE9BQUEsRUFBVSxNQUFNLFVBQWUsS0FBQSxNQUFBO0FBQUEsTUFDL0IsSUFBTSxFQUFBO0FBQUEsS0FDUCxDQUFBO0FBRUQsSUFBQSxNQUFNLElBQU8sR0FBQSxTQUFBLENBQVUsS0FBTyxFQUFBLE1BQUEsRUFBUSxLQUFPLEVBQUE7QUFBQSxNQUMzQyxjQUFjLEtBQU0sQ0FBQSxXQUFBO0FBQUEsTUFDcEIsT0FBQSxFQUFVLE1BQU0sSUFBUyxLQUFBO0FBQUEsS0FDMUIsQ0FBQTtBQUVELElBQUEsZUFBZSxhQUFhLEdBQWMsRUFBQTtBQUN4QyxNQUFBLElBQUEsQ0FBSyxLQUFRLEdBQUEsR0FBQTtBQUNiLE1BQUEsV0FBQSxDQUFZLE1BQVMsR0FBQSxFQUFBO0FBRXJCLE1BQUEsSUFBSSxHQUFLLEVBQUE7QUFFUCxRQUFBLE1BQU0sUUFBUyxFQUFBO0FBQ2YsUUFBQSxnQkFBQSxDQUFpQixPQUFPLGlCQUFrQixFQUFBO0FBQzFDLFFBQUEsY0FBQSxDQUFlLEtBQVEsR0FBQSxJQUFBO0FBQUEsT0FFcEIsTUFBQTtBQUNILFFBQUEsY0FBQSxDQUFlLEtBQVEsR0FBQSxLQUFBO0FBQUE7QUFHekIsTUFBQSxZQUFBLENBQWEsT0FBTyxLQUFNLEVBQUE7QUFDMUIsTUFBQSxVQUFBLENBQVcsTUFBTTtBQUNmLFFBQUksSUFBQSxDQUFDLE9BQU8sS0FBTSxDQUFBLHFCQUFBO0FBQ2hCLFVBQUEsZUFBQSxDQUFnQixPQUFRLEVBQUE7QUFBQSxTQUN6QixDQUFDLENBQUE7QUFBQTtBQUdOLElBQUEsTUFBTSxrQkFBa0IsZUFBZ0IsRUFBQTtBQUN4QyxJQUFNLE1BQUEsY0FBQSxHQUFpQixJQUFJLEtBQUssQ0FBQTtBQUNoQyxJQUFNLE1BQUEsU0FBQSxHQUFZLElBQUksS0FBSyxDQUFBO0FBQzNCLElBQUEsTUFBTSxlQUFlLEdBQXNCLEVBQUE7QUFDM0MsSUFBQSxNQUFNLGlCQUFpQixHQUFpQixFQUFBO0FBRXhDLElBQUEsTUFBTSxxQkFBcUIsUUFBUyxDQUFBLE1BQU0sZ0JBQWlCLENBQUEsS0FBQSxFQUFPLHNCQUFzQixNQUFTLENBQUE7QUFFakcsSUFBQSxNQUFNLFFBQVcsR0FBQSxHQUFBLGlCQUE2QixJQUFBLEdBQUEsRUFBSyxDQUFBO0FBQ25ELElBQUEsTUFBTSxTQUFZLEdBQUEsR0FBQSxpQkFBa0MsSUFBQSxHQUFBLEVBQUssQ0FBQTtBQUV6RCxJQUFBLE1BQU0sRUFBRSxRQUFTLEVBQUEsR0FBSSxVQUFVLEVBQUUsV0FBQSxFQUFhLFFBQVEsQ0FBQTtBQUN0RCxJQUFBLE1BQU0sY0FBYyxRQUFTLENBQUE7QUFBQSxNQUMzQixNQUFRLEVBQUEsRUFBQTtBQUFBLE1BQ1IsUUFBVSxFQUFBO0FBQUE7QUFBQSxRQUVSLEtBQU8sRUFBQSxDQUFBO0FBQUE7QUFBQSxRQUVQLEtBQUEsc0JBQVcsR0FBSSxFQUFBO0FBQUE7QUFBQSxRQUVmLE1BQUEsc0JBQVksR0FBSTtBQUFBO0FBQ2xCLEtBQ0QsQ0FBQTtBQUVELElBQUEsU0FBUyxXQUFjLEdBQUE7QUFDckIsTUFBQSxJQUFJLENBQUMsV0FBWSxDQUFBLE1BQUEsSUFBVSxLQUFNLENBQUEsWUFBQSxJQUFnQixVQUFVLEtBQU8sRUFBQTtBQUNoRSxRQUFZLFdBQUEsQ0FBQSxRQUFBLENBQVMsS0FBUSxHQUFBLFFBQUEsQ0FBUyxLQUFNLENBQUEsSUFBQTtBQUU1QyxRQUFBO0FBQUE7QUFJRixNQUFZLFdBQUEsQ0FBQSxRQUFBLENBQVMsTUFBUyxtQkFBQSxJQUFJLEdBQUksRUFBQTtBQUN0QyxNQUFBLElBQUksU0FBWSxHQUFBLENBQUE7QUFHaEIsTUFBQSxLQUFBLE1BQVcsQ0FBQyxFQUFBLEVBQUksS0FBSyxDQUFBLElBQUssU0FBUyxLQUFPLEVBQUE7QUFDeEMsUUFBQSxNQUFNLEtBQVEsR0FBQSxRQUFBLENBQVMsS0FBTyxFQUFBLFdBQUEsQ0FBWSxNQUFNLENBQUE7QUFDaEQsUUFBQSxXQUFBLENBQVksU0FBUyxLQUFNLENBQUEsR0FBQSxDQUFJLEVBQUksRUFBQSxLQUFBLEdBQVEsSUFBSSxDQUFDLENBQUE7QUFDaEQsUUFBSSxJQUFBLEtBQUE7QUFDRixVQUFBLFNBQUEsRUFBQTtBQUFBO0FBSUosTUFBQSxLQUFBLE1BQVcsQ0FBQyxPQUFBLEVBQVMsS0FBSyxDQUFBLElBQUssVUFBVSxLQUFPLEVBQUE7QUFDOUMsUUFBQSxLQUFBLE1BQVcsVUFBVSxLQUFPLEVBQUE7QUFDMUIsVUFBQSxJQUFJLFlBQVksUUFBUyxDQUFBLEtBQUEsQ0FBTSxHQUFJLENBQUEsTUFBTSxJQUFLLENBQUcsRUFBQTtBQUMvQyxZQUFZLFdBQUEsQ0FBQSxRQUFBLENBQVMsTUFBTyxDQUFBLEdBQUEsQ0FBSSxPQUFPLENBQUE7QUFDdkMsWUFBQTtBQUFBO0FBQ0Y7QUFDRjtBQUdGLE1BQUEsV0FBQSxDQUFZLFNBQVMsS0FBUSxHQUFBLFNBQUE7QUFBQTtBQUcvQixJQUFNLEtBQUEsQ0FBQSxDQUFDLE1BQU0sV0FBWSxDQUFBLE1BQUEsRUFBUSxNQUFNLFFBQVMsQ0FBQSxLQUFBLENBQU0sSUFBSSxDQUFBLEVBQUcsTUFBTTtBQUNqRSxNQUFZLFdBQUEsRUFBQTtBQUFBLEtBQ1gsRUFBQSxFQUFFLFNBQVcsRUFBQSxJQUFBLEVBQU0sQ0FBQTtBQUV0QixJQUFNLEtBQUEsQ0FBQSxNQUFNLElBQUssQ0FBQSxLQUFBLEVBQU8sTUFBTTtBQUU1QixNQUFBLFFBQUEsQ0FBUyxNQUFNO0FBQ2IsUUFBQSxJQUFJLElBQUssQ0FBQSxLQUFBO0FBQ1AsVUFBWSxXQUFBLEVBQUE7QUFBQSxPQUNmLENBQUE7QUFBQSxLQUNBLEVBQUEsRUFBRSxLQUFPLEVBQUEsTUFBQSxFQUFRLENBQUE7QUFFcEIsSUFBQSxNQUFNLE9BQU8sa0JBQW1CLEVBQUE7QUFDaEMsSUFBQSxTQUFBLENBQVUsTUFBTTtBQUNkLE1BQUEsSUFBSSxNQUFNLE9BQVMsRUFBQTtBQUNqQixRQUFLLElBQUEsQ0FBQSxPQUFBLENBQVEsYUFBZ0IsR0FBQSxnQkFBQSxDQUFpQixLQUFPLEVBQUEsYUFBQTtBQUNyRCxRQUFLLElBQUEsQ0FBQSxPQUFBLENBQVEsa0JBQXFCLEdBQUEsZ0JBQUEsQ0FBaUIsS0FBTyxFQUFBLGtCQUFBO0FBQzFELFFBQUssSUFBQSxDQUFBLE9BQUEsQ0FBUSxpQkFBb0IsR0FBQSxnQkFBQSxDQUFpQixLQUFPLEVBQUEsaUJBQUE7QUFBQTtBQUMzRCxLQUNELENBQUE7QUFFRCxJQUFhLFFBQUEsQ0FBQTtBQUFBLE1BQ1gsUUFBVSxFQUFBLFFBQUEsQ0FBUyxNQUFNLFdBQUEsQ0FBWSxRQUFRLENBQUE7QUFBQSxNQUM3QyxrQkFBQTtBQUFBLE1BQ0EsYUFBQSxFQUFlLGlCQUFpQixLQUFPLEVBQUEsYUFBQTtBQUFBLE1BQ3ZDLGtCQUFBLEVBQW9CLGlCQUFpQixLQUFPLEVBQUEsa0JBQUE7QUFBQSxNQUM1QyxpQkFBQSxFQUFtQixpQkFBaUIsS0FBTyxFQUFBO0FBQUEsS0FDNUMsQ0FBQTtBQUVELElBQTJCLDBCQUFBLENBQUE7QUFBQSxNQUN6QixVQUFBO0FBQUEsTUFDQSxRQUFBO0FBQUEsTUFDQSxRQUFBO0FBQUEsTUFDQSxJQUFBO0FBQUEsTUFDQSxZQUFBO0FBQUEsTUFDQSxTQUFXLEVBQUEsRUFBQTtBQUFBLE1BQ1gsY0FBQTtBQUFBLE1BQ0EsU0FBQTtBQUFBLE1BQ0EsWUFBQTtBQUFBLE1BQ0Esa0JBQUE7QUFBQSxNQUNBLG9CQUFBLEVBQXNCLENBQU8sR0FBQSxLQUFBLFlBQUEsQ0FBYSxLQUFRLEdBQUEsR0FBQTtBQUFBLE1BQ2xELGNBQUE7QUFBQSxNQUNBLHNCQUFBLEVBQXdCLENBQU8sR0FBQSxLQUFBLGNBQUEsQ0FBZSxLQUFRLEdBQUEsR0FBQTtBQUFBLE1BQ3RELGFBQUE7QUFBQSxNQUNBLHVCQUFBO0FBQUEsTUFDQSxtQkFBbUIsZUFBZ0IsQ0FBQSxFQUFBO0FBQUEsTUFDbkMsUUFBQTtBQUFBLE1BQ0EsU0FBQTtBQUFBLE1BQ0EsV0FBQTtBQUFBLE1BQ0E7QUFBQSxLQUNELENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswXX0=