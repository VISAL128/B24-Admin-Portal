import {CalendarDate as $35ea8db9cb2ccb90$export$99faa760c7908e4f} from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/@internationalized/date/dist/CalendarDate.mjs?v=1214a853";

/*
 * Copyright 2020 Adobe. All rights reserved.
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */ // Portions of the code in this file are based on code from ICU.
// Original licensing can be found in the NOTICE file in the root directory of this source tree.

const $f2f3e0e3a817edbd$var$CIVIL_EPOC = 1948440; // CE 622 July 16 Friday (Julian calendar) / CE 622 July 19 (Gregorian calendar)
const $f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC = 1948439; // CE 622 July 15 Thursday (Julian calendar)
const $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START = 1300;
const $f2f3e0e3a817edbd$var$UMALQURA_YEAR_END = 1600;
const $f2f3e0e3a817edbd$var$UMALQURA_START_DAYS = 460322;
function $f2f3e0e3a817edbd$var$islamicToJulianDay(epoch, year, month, day) {
    return day + Math.ceil(29.5 * (month - 1)) + (year - 1) * 354 + Math.floor((3 + 11 * year) / 30) + epoch - 1;
}
function $f2f3e0e3a817edbd$var$julianDayToIslamic(calendar, epoch, jd) {
    let year = Math.floor((30 * (jd - epoch) + 10646) / 10631);
    let month = Math.min(12, Math.ceil((jd - (29 + $f2f3e0e3a817edbd$var$islamicToJulianDay(epoch, year, 1, 1))) / 29.5) + 1);
    let day = jd - $f2f3e0e3a817edbd$var$islamicToJulianDay(epoch, year, month, 1) + 1;
    return new (0, $35ea8db9cb2ccb90$export$99faa760c7908e4f)(calendar, year, month, day);
}
function $f2f3e0e3a817edbd$var$isLeapYear(year) {
    return (14 + 11 * year) % 30 < 11;
}
class $f2f3e0e3a817edbd$export$2066795aadd37bfc {
    fromJulianDay(jd) {
        return $f2f3e0e3a817edbd$var$julianDayToIslamic(this, $f2f3e0e3a817edbd$var$CIVIL_EPOC, jd);
    }
    toJulianDay(date) {
        return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$CIVIL_EPOC, date.year, date.month, date.day);
    }
    getDaysInMonth(date) {
        let length = 29 + date.month % 2;
        if (date.month === 12 && $f2f3e0e3a817edbd$var$isLeapYear(date.year)) length++;
        return length;
    }
    getMonthsInYear() {
        return 12;
    }
    getDaysInYear(date) {
        return $f2f3e0e3a817edbd$var$isLeapYear(date.year) ? 355 : 354;
    }
    getYearsInEra() {
        // 9999 gregorian
        return 9665;
    }
    getEras() {
        return [
            'AH'
        ];
    }
    constructor(){
        this.identifier = 'islamic-civil';
    }
}
class $f2f3e0e3a817edbd$export$37f0887f2f9d22f7 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc {
    fromJulianDay(jd) {
        return $f2f3e0e3a817edbd$var$julianDayToIslamic(this, $f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC, jd);
    }
    toJulianDay(date) {
        return $f2f3e0e3a817edbd$var$islamicToJulianDay($f2f3e0e3a817edbd$var$ASTRONOMICAL_EPOC, date.year, date.month, date.day);
    }
    constructor(...args){
        super(...args), this.identifier = 'islamic-tbla';
    }
}
// Generated by scripts/generate-umalqura.js
const $f2f3e0e3a817edbd$var$UMALQURA_DATA = 'qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=';
let $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH;
let $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE;
function $f2f3e0e3a817edbd$var$umalquraYearStart(year) {
    return $f2f3e0e3a817edbd$var$UMALQURA_START_DAYS + $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[year - $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START];
}
function $f2f3e0e3a817edbd$var$umalquraMonthLength(year, month) {
    let idx = year - $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START;
    let mask = 0x01 << 11 - (month - 1);
    if (($f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH[idx] & mask) === 0) return 29;
    else return 30;
}
function $f2f3e0e3a817edbd$var$umalquraMonthStart(year, month) {
    let day = $f2f3e0e3a817edbd$var$umalquraYearStart(year);
    for(let i = 1; i < month; i++)day += $f2f3e0e3a817edbd$var$umalquraMonthLength(year, i);
    return day;
}
function $f2f3e0e3a817edbd$var$umalquraYearLength(year) {
    return $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[year + 1 - $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START] - $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[year - $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START];
}
class $f2f3e0e3a817edbd$export$5baab4758c231076 extends $f2f3e0e3a817edbd$export$2066795aadd37bfc {
    fromJulianDay(jd) {
        let days = jd - $f2f3e0e3a817edbd$var$CIVIL_EPOC;
        let startDays = $f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_START);
        let endDays = $f2f3e0e3a817edbd$var$umalquraYearStart($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END);
        if (days < startDays || days > endDays) return super.fromJulianDay(jd);
        else {
            let y = $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START - 1;
            let m = 1;
            let d = 1;
            while(d > 0){
                y++;
                d = days - $f2f3e0e3a817edbd$var$umalquraYearStart(y) + 1;
                let yearLength = $f2f3e0e3a817edbd$var$umalquraYearLength(y);
                if (d === yearLength) {
                    m = 12;
                    break;
                } else if (d < yearLength) {
                    let monthLength = $f2f3e0e3a817edbd$var$umalquraMonthLength(y, m);
                    m = 1;
                    while(d > monthLength){
                        d -= monthLength;
                        m++;
                        monthLength = $f2f3e0e3a817edbd$var$umalquraMonthLength(y, m);
                    }
                    break;
                }
            }
            return new (0, $35ea8db9cb2ccb90$export$99faa760c7908e4f)(this, y, m, days - $f2f3e0e3a817edbd$var$umalquraMonthStart(y, m) + 1);
        }
    }
    toJulianDay(date) {
        if (date.year < $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START || date.year > $f2f3e0e3a817edbd$var$UMALQURA_YEAR_END) return super.toJulianDay(date);
        return $f2f3e0e3a817edbd$var$CIVIL_EPOC + $f2f3e0e3a817edbd$var$umalquraMonthStart(date.year, date.month) + (date.day - 1);
    }
    getDaysInMonth(date) {
        if (date.year < $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START || date.year > $f2f3e0e3a817edbd$var$UMALQURA_YEAR_END) return super.getDaysInMonth(date);
        return $f2f3e0e3a817edbd$var$umalquraMonthLength(date.year, date.month);
    }
    getDaysInYear(date) {
        if (date.year < $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START || date.year > $f2f3e0e3a817edbd$var$UMALQURA_YEAR_END) return super.getDaysInYear(date);
        return $f2f3e0e3a817edbd$var$umalquraYearLength(date.year);
    }
    constructor(){
        super(), this.identifier = 'islamic-umalqura';
        if (!$f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH) $f2f3e0e3a817edbd$var$UMALQURA_MONTHLENGTH = new Uint16Array(Uint8Array.from(atob($f2f3e0e3a817edbd$var$UMALQURA_DATA), (c)=>c.charCodeAt(0)).buffer);
        if (!$f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE) {
            $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE = new Uint32Array($f2f3e0e3a817edbd$var$UMALQURA_YEAR_END - $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START + 1);
            let yearStart = 0;
            for(let year = $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START; year <= $f2f3e0e3a817edbd$var$UMALQURA_YEAR_END; year++){
                $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START_TABLE[year - $f2f3e0e3a817edbd$var$UMALQURA_YEAR_START] = yearStart;
                for(let i = 1; i <= 12; i++)yearStart += $f2f3e0e3a817edbd$var$umalquraMonthLength(year, i);
            }
        }
    }
}


export {$f2f3e0e3a817edbd$export$2066795aadd37bfc as IslamicCivilCalendar, $f2f3e0e3a817edbd$export$37f0887f2f9d22f7 as IslamicTabularCalendar, $f2f3e0e3a817edbd$export$5baab4758c231076 as IslamicUmalquraCalendar};
                                                  

//# sourceMappingURL=data:application/json;base64,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QUFLLEtBQUssSUFBSyxDQUFBLEtBQUssR0FBRyxHQUFHLENBQUE7SUFDOUU7SUFFQSxlQUFlLElBQXFCLEVBQVU7UUFDNUMsSUFBSSxLQUFLLElBQUksR0FBRyw2Q0FBdUIsS0FBSyxJQUFJLEdBQUcseUNBQ2pELE9BQU8sS0FBSyxDQUFDLGVBQWU7UUFHOUIsT0FBTywwQ0FBb0IsS0FBSyxJQUFJLEVBQUUsS0FBSyxLQUFLO0lBQ2xEO0lBRUEsY0FBYyxJQUFxQixFQUFVO1FBQzNDLElBQUksS0FBSyxJQUFJLEdBQUcsNkNBQXVCLEtBQUssSUFBSSxHQUFHLHlDQUNqRCxPQUFPLEtBQUssQ0FBQyxjQUFjO1FBRzdCLE9BQU8seUNBQW1CLEtBQUssSUFBSTtJQUNyQztJQTFFQSxhQUFjO1FBQ1osS0FBSyxTQUhQLGFBQWlDO1FBSS9CLElBQUksQ0FBQyw0Q0FDSCw2Q0FBdUIsSUFBSSxZQUFZLFdBQVcsSUFBSSxDQUFDLEtBQUssc0NBQWdCLENBQUEsSUFBSyxFQUFFLFVBQVUsQ0FBQyxJQUFJLE1BQU07UUFHMUcsSUFBSSxDQUFDLGlEQUEyQjtZQUM5QixrREFBNEIsSUFBSSxZQUFZLDBDQUFvQiw0Q0FBc0I7WUFFdEYsSUFBSSxZQUFZO1lBQ2hCLElBQUssSUFBSSxPQUFPLDJDQUFxQixRQUFRLHlDQUFtQixPQUFRO2dCQUN0RSwrQ0FBeUIsQ0FBQyxPQUFPLDBDQUFvQixHQUFHO2dCQUN4RCxJQUFLLElBQUksSUFBSSxHQUFHLEtBQUssSUFBSSxJQUN2QixhQUFhLDBDQUFvQixNQUFNO1lBRTNDO1FBQ0Y7SUFDRjtBQTBERiIsInNvdXJjZXMiOlsicGFja2FnZXMvQGludGVybmF0aW9uYWxpemVkL2RhdGUvc3JjL2NhbGVuZGFycy9Jc2xhbWljQ2FsZW5kYXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFBvcnRpb25zIG9mIHRoZSBjb2RlIGluIHRoaXMgZmlsZSBhcmUgYmFzZWQgb24gY29kZSBmcm9tIElDVS5cbi8vIE9yaWdpbmFsIGxpY2Vuc2luZyBjYW4gYmUgZm91bmQgaW4gdGhlIE5PVElDRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuXG5pbXBvcnQge0FueUNhbGVuZGFyRGF0ZSwgQ2FsZW5kYXIsIENhbGVuZGFySWRlbnRpZmllcn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtDYWxlbmRhckRhdGV9IGZyb20gJy4uL0NhbGVuZGFyRGF0ZSc7XG5cbmNvbnN0IENJVklMX0VQT0MgPSAxOTQ4NDQwOyAvLyBDRSA2MjIgSnVseSAxNiBGcmlkYXkgKEp1bGlhbiBjYWxlbmRhcikgLyBDRSA2MjIgSnVseSAxOSAoR3JlZ29yaWFuIGNhbGVuZGFyKVxuY29uc3QgQVNUUk9OT01JQ0FMX0VQT0MgPSAxOTQ4NDM5OyAvLyBDRSA2MjIgSnVseSAxNSBUaHVyc2RheSAoSnVsaWFuIGNhbGVuZGFyKVxuY29uc3QgVU1BTFFVUkFfWUVBUl9TVEFSVCA9IDEzMDA7XG5jb25zdCBVTUFMUVVSQV9ZRUFSX0VORCA9IDE2MDA7XG5jb25zdCBVTUFMUVVSQV9TVEFSVF9EQVlTID0gNDYwMzIyO1xuXG5mdW5jdGlvbiBpc2xhbWljVG9KdWxpYW5EYXkoZXBvY2g6IG51bWJlciwgeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyLCBkYXk6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBkYXkgK1xuICAgIE1hdGguY2VpbCgyOS41ICogKG1vbnRoIC0gMSkpICtcbiAgICAoeWVhciAtIDEpICogMzU0ICtcbiAgICBNYXRoLmZsb29yKCgzICsgMTEgKiB5ZWFyKSAvIDMwKSArXG4gICAgZXBvY2ggLSAxO1xufVxuXG5mdW5jdGlvbiBqdWxpYW5EYXlUb0lzbGFtaWMoY2FsZW5kYXI6IENhbGVuZGFyLCBlcG9jaDogbnVtYmVyLCBqZDogbnVtYmVyKSB7XG4gIGxldCB5ZWFyID0gTWF0aC5mbG9vcigoMzAgKiAoamQgLSBlcG9jaCkgKyAxMDY0NikgLyAxMDYzMSk7XG4gIGxldCBtb250aCA9IE1hdGgubWluKDEyLCBNYXRoLmNlaWwoKGpkIC0gKDI5ICsgaXNsYW1pY1RvSnVsaWFuRGF5KGVwb2NoLCB5ZWFyLCAxLCAxKSkpIC8gMjkuNSkgKyAxKTtcbiAgbGV0IGRheSA9IGpkIC0gaXNsYW1pY1RvSnVsaWFuRGF5KGVwb2NoLCB5ZWFyLCBtb250aCwgMSkgKyAxO1xuXG4gIHJldHVybiBuZXcgQ2FsZW5kYXJEYXRlKGNhbGVuZGFyLCB5ZWFyLCBtb250aCwgZGF5KTtcbn1cblxuZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyOiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuICgxNCArIDExICogeWVhcikgJSAzMCA8IDExO1xufVxuXG4vKipcbiAqIFRoZSBJc2xhbWljIGNhbGVuZGFyLCBhbHNvIGtub3duIGFzIHRoZSBcIkhpanJpXCIgY2FsZW5kYXIsIGlzIHVzZWQgdGhyb3VnaG91dCBtdWNoIG9mIHRoZSBBcmFiIHdvcmxkLlxuICogVGhlIGNpdmlsIHZhcmlhbnQgdXNlcyBzaW1wbGUgYXJpdGhtZXRpYyBydWxlcyByYXRoZXIgdGhhbiBhc3Ryb25vbWljYWwgY2FsY3VsYXRpb25zIHRvIGFwcHJveGltYXRlXG4gKiB0aGUgdHJhZGl0aW9uYWwgY2FsZW5kYXIsIHdoaWNoIGlzIGJhc2VkIG9uIHNpZ2h0aW5nIG9mIHRoZSBjcmVzY2VudCBtb29uLiBJdCB1c2VzIEZyaWRheSwgSnVseSAxNiA2MjIgQ0UgKEp1bGlhbikgYXMgdGhlIGVwb2NoLlxuICogRWFjaCB5ZWFyIGhhcyAxMiBtb250aHMsIHdpdGggZWl0aGVyIDM1NCBvciAzNTUgZGF5cyBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBpcyBhIGxlYXAgeWVhci5cbiAqIExlYXJuIG1vcmUgYWJvdXQgdGhlIGF2YWlsYWJsZSBJc2xhbWljIGNhbGVuZGFycyBbaGVyZV0oaHR0cHM6Ly9jbGRyLnVuaWNvZGUub3JnL2RldmVsb3BtZW50L2RldmVsb3BtZW50LXByb2Nlc3MvZGVzaWduLXByb3Bvc2Fscy9pc2xhbWljLWNhbGVuZGFyLXR5cGVzKS5cbiAqL1xuZXhwb3J0IGNsYXNzIElzbGFtaWNDaXZpbENhbGVuZGFyIGltcGxlbWVudHMgQ2FsZW5kYXIge1xuICBpZGVudGlmaWVyOiBDYWxlbmRhcklkZW50aWZpZXIgPSAnaXNsYW1pYy1jaXZpbCc7XG5cbiAgZnJvbUp1bGlhbkRheShqZDogbnVtYmVyKTogQ2FsZW5kYXJEYXRlIHtcbiAgICByZXR1cm4ganVsaWFuRGF5VG9Jc2xhbWljKHRoaXMsIENJVklMX0VQT0MsIGpkKTtcbiAgfVxuXG4gIHRvSnVsaWFuRGF5KGRhdGU6IEFueUNhbGVuZGFyRGF0ZSk6IG51bWJlciB7XG4gICAgcmV0dXJuIGlzbGFtaWNUb0p1bGlhbkRheShDSVZJTF9FUE9DLCBkYXRlLnllYXIsIGRhdGUubW9udGgsIGRhdGUuZGF5KTtcbiAgfVxuXG4gIGdldERheXNJbk1vbnRoKGRhdGU6IEFueUNhbGVuZGFyRGF0ZSk6IG51bWJlciB7XG4gICAgbGV0IGxlbmd0aCA9IDI5ICsgZGF0ZS5tb250aCAlIDI7XG4gICAgaWYgKGRhdGUubW9udGggPT09IDEyICYmIGlzTGVhcFllYXIoZGF0ZS55ZWFyKSkge1xuICAgICAgbGVuZ3RoKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxlbmd0aDtcbiAgfVxuXG4gIGdldE1vbnRoc0luWWVhcigpOiBudW1iZXIge1xuICAgIHJldHVybiAxMjtcbiAgfVxuXG4gIGdldERheXNJblllYXIoZGF0ZTogQW55Q2FsZW5kYXJEYXRlKTogbnVtYmVyIHtcbiAgICByZXR1cm4gaXNMZWFwWWVhcihkYXRlLnllYXIpID8gMzU1IDogMzU0O1xuICB9XG5cbiAgZ2V0WWVhcnNJbkVyYSgpOiBudW1iZXIge1xuICAgIC8vIDk5OTkgZ3JlZ29yaWFuXG4gICAgcmV0dXJuIDk2NjU7XG4gIH1cblxuICBnZXRFcmFzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gWydBSCddO1xuICB9XG59XG5cbi8qKlxuICogVGhlIElzbGFtaWMgY2FsZW5kYXIsIGFsc28ga25vd24gYXMgdGhlIFwiSGlqcmlcIiBjYWxlbmRhciwgaXMgdXNlZCB0aHJvdWdob3V0IG11Y2ggb2YgdGhlIEFyYWIgd29ybGQuXG4gKiBUaGUgdGFidWxhciB2YXJpYW50IHVzZXMgc2ltcGxlIGFyaXRobWV0aWMgcnVsZXMgcmF0aGVyIHRoYW4gYXN0cm9ub21pY2FsIGNhbGN1bGF0aW9ucyB0byBhcHByb3hpbWF0ZVxuICogdGhlIHRyYWRpdGlvbmFsIGNhbGVuZGFyLCB3aGljaCBpcyBiYXNlZCBvbiBzaWdodGluZyBvZiB0aGUgY3Jlc2NlbnQgbW9vbi4gSXQgdXNlcyBUaHVyc2RheSwgSnVseSAxNSA2MjIgQ0UgKEp1bGlhbikgYXMgdGhlIGVwb2NoLlxuICogRWFjaCB5ZWFyIGhhcyAxMiBtb250aHMsIHdpdGggZWl0aGVyIDM1NCBvciAzNTUgZGF5cyBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBpcyBhIGxlYXAgeWVhci5cbiAqIExlYXJuIG1vcmUgYWJvdXQgdGhlIGF2YWlsYWJsZSBJc2xhbWljIGNhbGVuZGFycyBbaGVyZV0oaHR0cHM6Ly9jbGRyLnVuaWNvZGUub3JnL2RldmVsb3BtZW50L2RldmVsb3BtZW50LXByb2Nlc3MvZGVzaWduLXByb3Bvc2Fscy9pc2xhbWljLWNhbGVuZGFyLXR5cGVzKS5cbiAqL1xuZXhwb3J0IGNsYXNzIElzbGFtaWNUYWJ1bGFyQ2FsZW5kYXIgZXh0ZW5kcyBJc2xhbWljQ2l2aWxDYWxlbmRhciB7XG4gIGlkZW50aWZpZXI6IENhbGVuZGFySWRlbnRpZmllciA9ICdpc2xhbWljLXRibGEnO1xuXG4gIGZyb21KdWxpYW5EYXkoamQ6IG51bWJlcik6IENhbGVuZGFyRGF0ZSB7XG4gICAgcmV0dXJuIGp1bGlhbkRheVRvSXNsYW1pYyh0aGlzLCBBU1RST05PTUlDQUxfRVBPQywgamQpO1xuICB9XG5cbiAgdG9KdWxpYW5EYXkoZGF0ZTogQW55Q2FsZW5kYXJEYXRlKTogbnVtYmVyIHtcbiAgICByZXR1cm4gaXNsYW1pY1RvSnVsaWFuRGF5KEFTVFJPTk9NSUNBTF9FUE9DLCBkYXRlLnllYXIsIGRhdGUubW9udGgsIGRhdGUuZGF5KTtcbiAgfVxufVxuXG4vLyBHZW5lcmF0ZWQgYnkgc2NyaXB0cy9nZW5lcmF0ZS11bWFscXVyYS5qc1xuY29uc3QgVU1BTFFVUkFfREFUQSA9ICdxZ3BVRGNrTzFBYnFCbXdEclFwVkJha0drZ2VwQzlRRjJncGNCUzBObFFaS0IxUUxhZ3V0QmE0RVR3b1hCWXNHcFFiVkN0WUNXd21kQkUwS0pnMlZEYXdGdGdtNkFsc0tLd1dWQ3NvRzZRcjBBbllKdGdKV0Njb0twQXZTQzlrRjNBSnRDVTBGcFFwU0M2VUx0QVcyQ1ZjRmx3SkxCYU1HVWdkbEMyb0Zxd29yQlpVTVNnMmxEY29GMWdwWENhc0VTd21sQ2xJTGFndDFCWFlDdHdoYkJGVUZxUVcwQmRvSjNRUnVBallKcWdwVURiSU4xUVhhQWxzSnF3UlZDa2tMWkF0eEM3UUZ0UXBWQ2lVTmtnN0pEdFFHNlFwckNhc0Vrd3BKRGFRTnNnMjVDcm9FV3dvckJaVUtLZ3RWQzF3RnZRUTlBaDBKbFFwS0Mxb0xiUVcyQWpzSm13UlZCcWtHVkFkcUMyd0ZyUXBWQlNrTGtndXBDOVFGMmdwYUJhc0tsUVZKQjJRSHFndTFCYllDVmdwTkRpVUxVZ3RxQzYwRnJnSXZDWmNFU3dhbEJxd0cxZ3BkQlowRVRRb1dEWlVOcWdXMUJkb0NXd210QkpVRnlnYmtCdW9LOVFTMkFsWUpxZ3BVQzlJTDJRWHFBbTBKclFTVkNrb0xwUXV5QmJVSjFnU1hDa2NGa3daSkIxVUxhZ1ZyQ2lzRml3cEdEYU1OeWdYV0N0c0Vhd0pMQ2FVS1VndHBDM1VGZGdHM0NGc0NLd1ZsQmJRRjJnbnRCRzBCdGdpbUNsSU5xUTNVQmRvS1d3bXJCRk1HS1FkaUI2a0xzZ1cxQ2xVRkpRdVNEY2tPMGdicENtc0Zxd1JWQ2lrTlZBMnFEYlVKdWdRN0Nwc0VUUXFxQ3RVSzJnSmRDVjRFTGdxYURGVU5zZ2E1QnJvRVhRb3RCWlVLVWd1b0M3UUx1UVhhQWxvSlNndWtEZEVPNkFacUMyMEZOUVdWQmtvTnFBM1VEZG9HV3dXZEFpc0dGUXRLQzVVTHFnV3VDaTRKand3bkJaVUdxZ2JXQ2wwRm5RST0nO1xubGV0IFVNQUxRVVJBX01PTlRITEVOR1RIOiBVaW50MTZBcnJheTtcbmxldCBVTUFMUVVSQV9ZRUFSX1NUQVJUX1RBQkxFOiBVaW50MzJBcnJheTtcblxuZnVuY3Rpb24gdW1hbHF1cmFZZWFyU3RhcnQoeWVhcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIFVNQUxRVVJBX1NUQVJUX0RBWVMgKyBVTUFMUVVSQV9ZRUFSX1NUQVJUX1RBQkxFW3llYXIgLSBVTUFMUVVSQV9ZRUFSX1NUQVJUXTtcbn1cblxuZnVuY3Rpb24gdW1hbHF1cmFNb250aExlbmd0aCh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpOiBudW1iZXIge1xuICBsZXQgaWR4ID0gKHllYXIgLSBVTUFMUVVSQV9ZRUFSX1NUQVJUKTtcbiAgbGV0IG1hc2sgPSAoMHgwMSA8PCAoMTEgLSAobW9udGggLSAxKSkpO1xuICBpZiAoKFVNQUxRVVJBX01PTlRITEVOR1RIW2lkeF0gJiBtYXNrKSA9PT0gMCkge1xuICAgIHJldHVybiAyOTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMzA7XG4gIH1cbn1cblxuZnVuY3Rpb24gdW1hbHF1cmFNb250aFN0YXJ0KHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlcik6IG51bWJlciB7XG4gIGxldCBkYXkgPSB1bWFscXVyYVllYXJTdGFydCh5ZWFyKTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBtb250aDsgaSsrKSB7XG4gICAgZGF5ICs9IHVtYWxxdXJhTW9udGhMZW5ndGgoeWVhciwgaSk7XG4gIH1cbiAgcmV0dXJuIGRheTtcbn1cblxuZnVuY3Rpb24gdW1hbHF1cmFZZWFyTGVuZ3RoKHllYXI6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiBVTUFMUVVSQV9ZRUFSX1NUQVJUX1RBQkxFW3llYXIgKyAxIC0gVU1BTFFVUkFfWUVBUl9TVEFSVF0gLSBVTUFMUVVSQV9ZRUFSX1NUQVJUX1RBQkxFW3llYXIgLSBVTUFMUVVSQV9ZRUFSX1NUQVJUXTtcbn1cblxuLyoqXG4gKiBUaGUgSXNsYW1pYyBjYWxlbmRhciwgYWxzbyBrbm93biBhcyB0aGUgXCJIaWpyaVwiIGNhbGVuZGFyLCBpcyB1c2VkIHRocm91Z2hvdXQgbXVjaCBvZiB0aGUgQXJhYiB3b3JsZC5cbiAqIFRoZSBVbWFscXVyYSB2YXJpYW50IGlzIHByaW1hcmlseSB1c2VkIGluIFNhdWRpIEFyYWJpYS4gSXQgaXMgYSBsdW5hciBjYWxlbmRhciwgYmFzZWQgb24gYXN0cm9ub21pY2FsXG4gKiBjYWxjdWxhdGlvbnMgdGhhdCBwcmVkaWN0IHRoZSBzaWdodGluZyBvZiBhIGNyZXNjZW50IG1vb24uIE1vbnRoIGFuZCB5ZWFyIGxlbmd0aHMgdmFyeSBiZXR3ZWVuIHllYXJzXG4gKiBkZXBlbmRpbmcgb24gdGhlc2UgY2FsY3VsYXRpb25zLlxuICogTGVhcm4gbW9yZSBhYm91dCB0aGUgYXZhaWxhYmxlIElzbGFtaWMgY2FsZW5kYXJzIFtoZXJlXShodHRwczovL2NsZHIudW5pY29kZS5vcmcvZGV2ZWxvcG1lbnQvZGV2ZWxvcG1lbnQtcHJvY2Vzcy9kZXNpZ24tcHJvcG9zYWxzL2lzbGFtaWMtY2FsZW5kYXItdHlwZXMpLlxuICovXG5leHBvcnQgY2xhc3MgSXNsYW1pY1VtYWxxdXJhQ2FsZW5kYXIgZXh0ZW5kcyBJc2xhbWljQ2l2aWxDYWxlbmRhciB7XG4gIGlkZW50aWZpZXI6IENhbGVuZGFySWRlbnRpZmllciA9ICdpc2xhbWljLXVtYWxxdXJhJztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGlmICghVU1BTFFVUkFfTU9OVEhMRU5HVEgpIHtcbiAgICAgIFVNQUxRVVJBX01PTlRITEVOR1RIID0gbmV3IFVpbnQxNkFycmF5KFVpbnQ4QXJyYXkuZnJvbShhdG9iKFVNQUxRVVJBX0RBVEEpLCBjID0+IGMuY2hhckNvZGVBdCgwKSkuYnVmZmVyKTtcbiAgICB9XG5cbiAgICBpZiAoIVVNQUxRVVJBX1lFQVJfU1RBUlRfVEFCTEUpIHtcbiAgICAgIFVNQUxRVVJBX1lFQVJfU1RBUlRfVEFCTEUgPSBuZXcgVWludDMyQXJyYXkoVU1BTFFVUkFfWUVBUl9FTkQgLSBVTUFMUVVSQV9ZRUFSX1NUQVJUICsgMSk7XG5cbiAgICAgIGxldCB5ZWFyU3RhcnQgPSAwO1xuICAgICAgZm9yIChsZXQgeWVhciA9IFVNQUxRVVJBX1lFQVJfU1RBUlQ7IHllYXIgPD0gVU1BTFFVUkFfWUVBUl9FTkQ7IHllYXIrKykge1xuICAgICAgICBVTUFMUVVSQV9ZRUFSX1NUQVJUX1RBQkxFW3llYXIgLSBVTUFMUVVSQV9ZRUFSX1NUQVJUXSA9IHllYXJTdGFydDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTI7IGkrKykge1xuICAgICAgICAgIHllYXJTdGFydCArPSB1bWFscXVyYU1vbnRoTGVuZ3RoKHllYXIsIGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnJvbUp1bGlhbkRheShqZDogbnVtYmVyKTogQ2FsZW5kYXJEYXRlIHtcbiAgICBsZXQgZGF5cyA9IGpkIC0gQ0lWSUxfRVBPQztcbiAgICBsZXQgc3RhcnREYXlzID0gdW1hbHF1cmFZZWFyU3RhcnQoVU1BTFFVUkFfWUVBUl9TVEFSVCk7XG4gICAgbGV0IGVuZERheXMgPSB1bWFscXVyYVllYXJTdGFydChVTUFMUVVSQV9ZRUFSX0VORCk7XG4gICAgaWYgKGRheXMgPCBzdGFydERheXMgfHwgZGF5cyA+IGVuZERheXMpIHtcbiAgICAgIHJldHVybiBzdXBlci5mcm9tSnVsaWFuRGF5KGpkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHkgPSBVTUFMUVVSQV9ZRUFSX1NUQVJUIC0gMTtcbiAgICAgIGxldCBtID0gMTtcbiAgICAgIGxldCBkID0gMTtcbiAgICAgIHdoaWxlIChkID4gMCkge1xuICAgICAgICB5Kys7XG4gICAgICAgIGQgPSBkYXlzIC0gdW1hbHF1cmFZZWFyU3RhcnQoeSkgKyAxO1xuICAgICAgICBsZXQgeWVhckxlbmd0aCA9IHVtYWxxdXJhWWVhckxlbmd0aCh5KTtcbiAgICAgICAgaWYgKGQgPT09IHllYXJMZW5ndGgpIHtcbiAgICAgICAgICBtID0gMTI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAoZCA8IHllYXJMZW5ndGgpIHtcbiAgICAgICAgICBsZXQgbW9udGhMZW5ndGggPSB1bWFscXVyYU1vbnRoTGVuZ3RoKHksIG0pO1xuICAgICAgICAgIG0gPSAxO1xuICAgICAgICAgIHdoaWxlIChkID4gbW9udGhMZW5ndGgpIHtcbiAgICAgICAgICAgIGQgLT0gbW9udGhMZW5ndGg7XG4gICAgICAgICAgICBtKys7XG4gICAgICAgICAgICBtb250aExlbmd0aCA9IHVtYWxxdXJhTW9udGhMZW5ndGgoeSwgbSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgQ2FsZW5kYXJEYXRlKHRoaXMsIHksIG0sIChkYXlzIC0gdW1hbHF1cmFNb250aFN0YXJ0KHksIG0pICsgMSkpO1xuICAgIH1cbiAgfVxuXG4gIHRvSnVsaWFuRGF5KGRhdGU6IEFueUNhbGVuZGFyRGF0ZSk6IG51bWJlciB7XG4gICAgaWYgKGRhdGUueWVhciA8IFVNQUxRVVJBX1lFQVJfU1RBUlQgfHwgZGF0ZS55ZWFyID4gVU1BTFFVUkFfWUVBUl9FTkQpIHtcbiAgICAgIHJldHVybiBzdXBlci50b0p1bGlhbkRheShkYXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gQ0lWSUxfRVBPQyArIHVtYWxxdXJhTW9udGhTdGFydChkYXRlLnllYXIsIGRhdGUubW9udGgpICsgKGRhdGUuZGF5IC0gMSk7XG4gIH1cblxuICBnZXREYXlzSW5Nb250aChkYXRlOiBBbnlDYWxlbmRhckRhdGUpOiBudW1iZXIge1xuICAgIGlmIChkYXRlLnllYXIgPCBVTUFMUVVSQV9ZRUFSX1NUQVJUIHx8IGRhdGUueWVhciA+IFVNQUxRVVJBX1lFQVJfRU5EKSB7XG4gICAgICByZXR1cm4gc3VwZXIuZ2V0RGF5c0luTW9udGgoZGF0ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVtYWxxdXJhTW9udGhMZW5ndGgoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoKTtcbiAgfVxuXG4gIGdldERheXNJblllYXIoZGF0ZTogQW55Q2FsZW5kYXJEYXRlKTogbnVtYmVyIHtcbiAgICBpZiAoZGF0ZS55ZWFyIDwgVU1BTFFVUkFfWUVBUl9TVEFSVCB8fCBkYXRlLnllYXIgPiBVTUFMUVVSQV9ZRUFSX0VORCkge1xuICAgICAgcmV0dXJuIHN1cGVyLmdldERheXNJblllYXIoZGF0ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVtYWxxdXJhWWVhckxlbmd0aChkYXRlLnllYXIpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJ2ZXJzaW9uIjozLCJmaWxlIjoiSXNsYW1pY0NhbGVuZGFyLm1vZHVsZS5qcy5tYXAiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19