import {CalendarDate as $35ea8db9cb2ccb90$export$99faa760c7908e4f, CalendarDateTime as $35ea8db9cb2ccb90$export$ca871e8dbb80966f, Time as $35ea8db9cb2ccb90$export$680ea196effce5f, ZonedDateTime as $35ea8db9cb2ccb90$export$d3b7288e7994edea} from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/@internationalized/date/dist/CalendarDate.mjs?v=1214a853";
import {epochFromDate as $11d87f3f76e88657$export$bd4fb2bc8bb06fb, fromAbsolute as $11d87f3f76e88657$export$1b96692a1ba042ac, possibleAbsolutes as $11d87f3f76e88657$export$136f38efe7caf549, toAbsolute as $11d87f3f76e88657$export$5107c82f94518f5c, toCalendar as $11d87f3f76e88657$export$b4a036af3fc0b032, toCalendarDateTime as $11d87f3f76e88657$export$b21e0b124e224484, toTimeZone as $11d87f3f76e88657$export$538b00033cc11c75} from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/@internationalized/date/dist/conversion.mjs?v=1214a853";
import {getLocalTimeZone as $14e0f24ef4ac5c92$export$aa8b41735afcabd2} from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/@internationalized/date/dist/queries.mjs?v=1214a853";
import {GregorianCalendar as $3b62074eb05584b2$export$80ee6245ec4f29ec} from "/_nuxt/@fs/D:/Bill24/b24managementportal/node_modules/@internationalized/date/dist/GregorianCalendar.mjs?v=1214a853";

/*
 * Copyright 2020 Adobe. All rights reserved.
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */ 



const $fae977aafc393c5c$var$TIME_RE = /^(\d{2})(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?$/;
const $fae977aafc393c5c$var$DATE_RE = /^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})$/;
const $fae977aafc393c5c$var$DATE_TIME_RE = /^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?$/;
const $fae977aafc393c5c$var$ZONED_DATE_TIME_RE = /^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:([+-]\d{2})(?::?(\d{2}))?)?\[(.*?)\]$/;
const $fae977aafc393c5c$var$ABSOLUTE_RE = /^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:(?:([+-]\d{2})(?::?(\d{2}))?)|Z)$/;
const $fae977aafc393c5c$var$DATE_TIME_DURATION_RE = /^((?<negative>-)|\+)?P((?<years>\d*)Y)?((?<months>\d*)M)?((?<weeks>\d*)W)?((?<days>\d*)D)?((?<time>T)((?<hours>\d*[.,]?\d{1,9})H)?((?<minutes>\d*[.,]?\d{1,9})M)?((?<seconds>\d*[.,]?\d{1,9})S)?)?$/;
const $fae977aafc393c5c$var$requiredDurationTimeGroups = [
    'hours',
    'minutes',
    'seconds'
];
const $fae977aafc393c5c$var$requiredDurationGroups = [
    'years',
    'months',
    'weeks',
    'days',
    ...$fae977aafc393c5c$var$requiredDurationTimeGroups
];
function $fae977aafc393c5c$export$c9698ec7f05a07e1(value) {
    let m = value.match($fae977aafc393c5c$var$TIME_RE);
    if (!m) throw new Error('Invalid ISO 8601 time string: ' + value);
    return new (0, $35ea8db9cb2ccb90$export$680ea196effce5f)($fae977aafc393c5c$var$parseNumber(m[1], 0, 23), m[2] ? $fae977aafc393c5c$var$parseNumber(m[2], 0, 59) : 0, m[3] ? $fae977aafc393c5c$var$parseNumber(m[3], 0, 59) : 0, m[4] ? $fae977aafc393c5c$var$parseNumber(m[4], 0, Infinity) * 1000 : 0);
}
function $fae977aafc393c5c$export$6b862160d295c8e(value) {
    let m = value.match($fae977aafc393c5c$var$DATE_RE);
    if (!m) throw new Error('Invalid ISO 8601 date string: ' + value);
    let date = new (0, $35ea8db9cb2ccb90$export$99faa760c7908e4f)($fae977aafc393c5c$var$parseNumber(m[1], 0, 9999), $fae977aafc393c5c$var$parseNumber(m[2], 1, 12), 1);
    date.day = $fae977aafc393c5c$var$parseNumber(m[3], 1, date.calendar.getDaysInMonth(date));
    return date;
}
function $fae977aafc393c5c$export$588937bcd60ade55(value) {
    let m = value.match($fae977aafc393c5c$var$DATE_TIME_RE);
    if (!m) throw new Error('Invalid ISO 8601 date time string: ' + value);
    let year = $fae977aafc393c5c$var$parseNumber(m[1], -9999, 9999);
    let era = year < 1 ? 'BC' : 'AD';
    let date = new (0, $35ea8db9cb2ccb90$export$ca871e8dbb80966f)(era, year < 1 ? -year + 1 : year, $fae977aafc393c5c$var$parseNumber(m[2], 1, 12), 1, m[4] ? $fae977aafc393c5c$var$parseNumber(m[4], 0, 23) : 0, m[5] ? $fae977aafc393c5c$var$parseNumber(m[5], 0, 59) : 0, m[6] ? $fae977aafc393c5c$var$parseNumber(m[6], 0, 59) : 0, m[7] ? $fae977aafc393c5c$var$parseNumber(m[7], 0, Infinity) * 1000 : 0);
    date.day = $fae977aafc393c5c$var$parseNumber(m[3], 0, date.calendar.getDaysInMonth(date));
    return date;
}
function $fae977aafc393c5c$export$fd7893f06e92a6a4(value, disambiguation) {
    let m = value.match($fae977aafc393c5c$var$ZONED_DATE_TIME_RE);
    if (!m) throw new Error('Invalid ISO 8601 date time string: ' + value);
    let year = $fae977aafc393c5c$var$parseNumber(m[1], -9999, 9999);
    let era = year < 1 ? 'BC' : 'AD';
    let date = new (0, $35ea8db9cb2ccb90$export$d3b7288e7994edea)(era, year < 1 ? -year + 1 : year, $fae977aafc393c5c$var$parseNumber(m[2], 1, 12), 1, m[10], 0, m[4] ? $fae977aafc393c5c$var$parseNumber(m[4], 0, 23) : 0, m[5] ? $fae977aafc393c5c$var$parseNumber(m[5], 0, 59) : 0, m[6] ? $fae977aafc393c5c$var$parseNumber(m[6], 0, 59) : 0, m[7] ? $fae977aafc393c5c$var$parseNumber(m[7], 0, Infinity) * 1000 : 0);
    date.day = $fae977aafc393c5c$var$parseNumber(m[3], 0, date.calendar.getDaysInMonth(date));
    let plainDateTime = (0, $11d87f3f76e88657$export$b21e0b124e224484)(date);
    let ms;
    if (m[8]) {
        var _m_;
        date.offset = $fae977aafc393c5c$var$parseNumber(m[8], -23, 23) * 3600000 + $fae977aafc393c5c$var$parseNumber((_m_ = m[9]) !== null && _m_ !== void 0 ? _m_ : '0', 0, 59) * 60000;
        ms = (0, $11d87f3f76e88657$export$bd4fb2bc8bb06fb)(date) - date.offset;
        // Validate offset against parsed date.
        let absolutes = (0, $11d87f3f76e88657$export$136f38efe7caf549)(plainDateTime, date.timeZone);
        if (!absolutes.includes(ms)) throw new Error(`Offset ${$fae977aafc393c5c$var$offsetToString(date.offset)} is invalid for ${$fae977aafc393c5c$export$4223de14708adc63(date)} in ${date.timeZone}`);
    } else // Convert to absolute and back to fix invalid times due to DST.
    ms = (0, $11d87f3f76e88657$export$5107c82f94518f5c)((0, $11d87f3f76e88657$export$b21e0b124e224484)(plainDateTime), date.timeZone, disambiguation);
    return (0, $11d87f3f76e88657$export$1b96692a1ba042ac)(ms, date.timeZone);
}
function $fae977aafc393c5c$export$5adfdab05168c219(value, timeZone) {
    let m = value.match($fae977aafc393c5c$var$ABSOLUTE_RE);
    if (!m) throw new Error('Invalid ISO 8601 date time string: ' + value);
    let year = $fae977aafc393c5c$var$parseNumber(m[1], -9999, 9999);
    let era = year < 1 ? 'BC' : 'AD';
    let date = new (0, $35ea8db9cb2ccb90$export$d3b7288e7994edea)(era, year < 1 ? -year + 1 : year, $fae977aafc393c5c$var$parseNumber(m[2], 1, 12), 1, timeZone, 0, m[4] ? $fae977aafc393c5c$var$parseNumber(m[4], 0, 23) : 0, m[5] ? $fae977aafc393c5c$var$parseNumber(m[5], 0, 59) : 0, m[6] ? $fae977aafc393c5c$var$parseNumber(m[6], 0, 59) : 0, m[7] ? $fae977aafc393c5c$var$parseNumber(m[7], 0, Infinity) * 1000 : 0);
    date.day = $fae977aafc393c5c$var$parseNumber(m[3], 0, date.calendar.getDaysInMonth(date));
    var _m_;
    if (m[8]) date.offset = $fae977aafc393c5c$var$parseNumber(m[8], -23, 23) * 3600000 + $fae977aafc393c5c$var$parseNumber((_m_ = m[9]) !== null && _m_ !== void 0 ? _m_ : '0', 0, 59) * 60000;
    return (0, $11d87f3f76e88657$export$538b00033cc11c75)(date, timeZone);
}
function $fae977aafc393c5c$export$8e384432362ed0f0(value) {
    return $fae977aafc393c5c$export$5adfdab05168c219(value, (0, $14e0f24ef4ac5c92$export$aa8b41735afcabd2)());
}
function $fae977aafc393c5c$var$parseNumber(value, min, max) {
    let val = Number(value);
    if (val < min || val > max) throw new RangeError(`Value out of range: ${min} <= ${val} <= ${max}`);
    return val;
}
function $fae977aafc393c5c$export$f59dee82248f5ad4(time) {
    return `${String(time.hour).padStart(2, '0')}:${String(time.minute).padStart(2, '0')}:${String(time.second).padStart(2, '0')}${time.millisecond ? String(time.millisecond / 1000).slice(1) : ''}`;
}
function $fae977aafc393c5c$export$60dfd74aa96791bd(date) {
    let gregorianDate = (0, $11d87f3f76e88657$export$b4a036af3fc0b032)(date, new (0, $3b62074eb05584b2$export$80ee6245ec4f29ec)());
    let year;
    if (gregorianDate.era === 'BC') year = gregorianDate.year === 1 ? '0000' : '-' + String(Math.abs(1 - gregorianDate.year)).padStart(6, '00');
    else year = String(gregorianDate.year).padStart(4, '0');
    return `${year}-${String(gregorianDate.month).padStart(2, '0')}-${String(gregorianDate.day).padStart(2, '0')}`;
}
function $fae977aafc393c5c$export$4223de14708adc63(date) {
    // @ts-ignore
    return `${$fae977aafc393c5c$export$60dfd74aa96791bd(date)}T${$fae977aafc393c5c$export$f59dee82248f5ad4(date)}`;
}
function $fae977aafc393c5c$var$offsetToString(offset) {
    let sign = Math.sign(offset) < 0 ? '-' : '+';
    offset = Math.abs(offset);
    let offsetHours = Math.floor(offset / 3600000);
    let offsetMinutes = offset % 3600000 / 60000;
    return `${sign}${String(offsetHours).padStart(2, '0')}:${String(offsetMinutes).padStart(2, '0')}`;
}
function $fae977aafc393c5c$export$bf79f1ebf4b18792(date) {
    return `${$fae977aafc393c5c$export$4223de14708adc63(date)}${$fae977aafc393c5c$var$offsetToString(date.offset)}[${date.timeZone}]`;
}
function $fae977aafc393c5c$export$ecae829bb3747ea6(value) {
    var _match_groups, _match_groups1, _match_groups2, _match_groups3, _match_groups4, _match_groups5, _match_groups6, _match_groups7, _match_groups8;
    const match = value.match($fae977aafc393c5c$var$DATE_TIME_DURATION_RE);
    if (!match) throw new Error(`Invalid ISO 8601 Duration string: ${value}`);
    const parseDurationGroup = (group, isNegative)=>{
        if (!group) return 0;
        try {
            const sign = isNegative ? -1 : 1;
            return sign * Number(group.replace(',', '.'));
        } catch  {
            throw new Error(`Invalid ISO 8601 Duration string: ${value}`);
        }
    };
    const isNegative = !!((_match_groups = match.groups) === null || _match_groups === void 0 ? void 0 : _match_groups.negative);
    const hasRequiredGroups = $fae977aafc393c5c$var$requiredDurationGroups.some((group)=>{
        var _match_groups;
        return (_match_groups = match.groups) === null || _match_groups === void 0 ? void 0 : _match_groups[group];
    });
    if (!hasRequiredGroups) throw new Error(`Invalid ISO 8601 Duration string: ${value}`);
    const durationStringIncludesTime = (_match_groups1 = match.groups) === null || _match_groups1 === void 0 ? void 0 : _match_groups1.time;
    if (durationStringIncludesTime) {
        const hasRequiredDurationTimeGroups = $fae977aafc393c5c$var$requiredDurationTimeGroups.some((group)=>{
            var _match_groups;
            return (_match_groups = match.groups) === null || _match_groups === void 0 ? void 0 : _match_groups[group];
        });
        if (!hasRequiredDurationTimeGroups) throw new Error(`Invalid ISO 8601 Duration string: ${value}`);
    }
    const duration = {
        years: parseDurationGroup((_match_groups2 = match.groups) === null || _match_groups2 === void 0 ? void 0 : _match_groups2.years, isNegative),
        months: parseDurationGroup((_match_groups3 = match.groups) === null || _match_groups3 === void 0 ? void 0 : _match_groups3.months, isNegative),
        weeks: parseDurationGroup((_match_groups4 = match.groups) === null || _match_groups4 === void 0 ? void 0 : _match_groups4.weeks, isNegative),
        days: parseDurationGroup((_match_groups5 = match.groups) === null || _match_groups5 === void 0 ? void 0 : _match_groups5.days, isNegative),
        hours: parseDurationGroup((_match_groups6 = match.groups) === null || _match_groups6 === void 0 ? void 0 : _match_groups6.hours, isNegative),
        minutes: parseDurationGroup((_match_groups7 = match.groups) === null || _match_groups7 === void 0 ? void 0 : _match_groups7.minutes, isNegative),
        seconds: parseDurationGroup((_match_groups8 = match.groups) === null || _match_groups8 === void 0 ? void 0 : _match_groups8.seconds, isNegative)
    };
    if (duration.hours !== undefined && duration.hours % 1 !== 0 && (duration.minutes || duration.seconds)) throw new Error(`Invalid ISO 8601 Duration string: ${value} - only the smallest unit can be fractional`);
    if (duration.minutes !== undefined && duration.minutes % 1 !== 0 && duration.seconds) throw new Error(`Invalid ISO 8601 Duration string: ${value} - only the smallest unit can be fractional`);
    return duration;
}


export {$fae977aafc393c5c$export$c9698ec7f05a07e1 as parseTime, $fae977aafc393c5c$export$6b862160d295c8e as parseDate, $fae977aafc393c5c$export$588937bcd60ade55 as parseDateTime, $fae977aafc393c5c$export$fd7893f06e92a6a4 as parseZonedDateTime, $fae977aafc393c5c$export$4223de14708adc63 as dateTimeToString, $fae977aafc393c5c$export$5adfdab05168c219 as parseAbsolute, $fae977aafc393c5c$export$8e384432362ed0f0 as parseAbsoluteToLocal, $fae977aafc393c5c$export$f59dee82248f5ad4 as timeToString, $fae977aafc393c5c$export$60dfd74aa96791bd as dateToString, $fae977aafc393c5c$export$bf79f1ebf4b18792 as zonedDateTimeToString, $fae977aafc393c5c$export$ecae829bb3747ea6 as parseDuration};
                                         

//# sourceMappingURL=data:application/json;base64,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UyxPQUFPLElBQUksU0FBUyxPQUFPLEFBQUQsR0FDdEcsTUFBTSxJQUFJLE1BQU0sQ0FBQyxrQ0FBa0MsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0lBR3pHLElBQUksU0FBUyxPQUFPLEtBQUssYUFBYyxBQUFDLFNBQVMsT0FBTyxHQUFHLE1BQU8sS0FBTSxTQUFTLE9BQU8sRUFDdEYsTUFBTSxJQUFJLE1BQU0sQ0FBQyxrQ0FBa0MsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0lBR3pHLE9BQU87QUFDVCIsInNvdXJjZXMiOlsicGFja2FnZXMvQGludGVybmF0aW9uYWxpemVkL2RhdGUvc3JjL3N0cmluZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBbnlEYXRlVGltZSwgRGF0ZVRpbWVEdXJhdGlvbiwgRGlzYW1iaWd1YXRpb259IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtDYWxlbmRhckRhdGUsIENhbGVuZGFyRGF0ZVRpbWUsIFRpbWUsIFpvbmVkRGF0ZVRpbWV9IGZyb20gJy4vQ2FsZW5kYXJEYXRlJztcbmltcG9ydCB7ZXBvY2hGcm9tRGF0ZSwgZnJvbUFic29sdXRlLCBwb3NzaWJsZUFic29sdXRlcywgdG9BYnNvbHV0ZSwgdG9DYWxlbmRhciwgdG9DYWxlbmRhckRhdGVUaW1lLCB0b1RpbWVab25lfSBmcm9tICcuL2NvbnZlcnNpb24nO1xuaW1wb3J0IHtnZXRMb2NhbFRpbWVab25lfSBmcm9tICcuL3F1ZXJpZXMnO1xuaW1wb3J0IHtHcmVnb3JpYW5DYWxlbmRhcn0gZnJvbSAnLi9jYWxlbmRhcnMvR3JlZ29yaWFuQ2FsZW5kYXInO1xuaW1wb3J0IHtNdXRhYmxlfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgVElNRV9SRSA9IC9eKFxcZHsyfSkoPzo6KFxcZHsyfSkpPyg/OjooXFxkezJ9KSk/KFxcLlxcZCspPyQvO1xuY29uc3QgREFURV9SRSA9IC9eKFsrLV1cXGR7Nn18XFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KSQvO1xuY29uc3QgREFURV9USU1FX1JFID0gL14oWystXVxcZHs2fXxcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pKD86VChcXGR7Mn0pKT8oPzo6KFxcZHsyfSkpPyg/OjooXFxkezJ9KSk/KFxcLlxcZCspPyQvO1xuY29uc3QgWk9ORURfREFURV9USU1FX1JFID0gL14oWystXVxcZHs2fXxcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pKD86VChcXGR7Mn0pKT8oPzo6KFxcZHsyfSkpPyg/OjooXFxkezJ9KSk/KFxcLlxcZCspPyg/OihbKy1dXFxkezJ9KSg/Ojo/KFxcZHsyfSkpPyk/XFxbKC4qPylcXF0kLztcbmNvbnN0IEFCU09MVVRFX1JFID0gL14oWystXVxcZHs2fXxcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pKD86VChcXGR7Mn0pKT8oPzo6KFxcZHsyfSkpPyg/OjooXFxkezJ9KSk/KFxcLlxcZCspPyg/Oig/OihbKy1dXFxkezJ9KSg/Ojo/KFxcZHsyfSkpPyl8WikkLztcbmNvbnN0IERBVEVfVElNRV9EVVJBVElPTl9SRSA9XG4gICAgL14oKD88bmVnYXRpdmU+LSl8XFwrKT9QKCg/PHllYXJzPlxcZCopWSk/KCg/PG1vbnRocz5cXGQqKU0pPygoPzx3ZWVrcz5cXGQqKVcpPygoPzxkYXlzPlxcZCopRCk/KCg/PHRpbWU+VCkoKD88aG91cnM+XFxkKlsuLF0/XFxkezEsOX0pSCk/KCg/PG1pbnV0ZXM+XFxkKlsuLF0/XFxkezEsOX0pTSk/KCg/PHNlY29uZHM+XFxkKlsuLF0/XFxkezEsOX0pUyk/KT8kLztcbmNvbnN0IHJlcXVpcmVkRHVyYXRpb25UaW1lR3JvdXBzID0gWydob3VycycsICdtaW51dGVzJywgJ3NlY29uZHMnXTtcbmNvbnN0IHJlcXVpcmVkRHVyYXRpb25Hcm91cHMgPSBbJ3llYXJzJywgJ21vbnRocycsICd3ZWVrcycsICdkYXlzJywgLi4ucmVxdWlyZWREdXJhdGlvblRpbWVHcm91cHNdO1xuXG4vKiogUGFyc2VzIGFuIElTTyA4NjAxIHRpbWUgc3RyaW5nLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGltZSh2YWx1ZTogc3RyaW5nKTogVGltZSB7XG4gIGxldCBtID0gdmFsdWUubWF0Y2goVElNRV9SRSk7XG4gIGlmICghbSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJU08gODYwMSB0aW1lIHN0cmluZzogJyArIHZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgVGltZShcbiAgICBwYXJzZU51bWJlcihtWzFdLCAwLCAyMyksXG4gICAgbVsyXSA/IHBhcnNlTnVtYmVyKG1bMl0sIDAsIDU5KSA6IDAsXG4gICAgbVszXSA/IHBhcnNlTnVtYmVyKG1bM10sIDAsIDU5KSA6IDAsXG4gICAgbVs0XSA/IHBhcnNlTnVtYmVyKG1bNF0sIDAsIEluZmluaXR5KSAqIDEwMDAgOiAwXG4gICk7XG59XG5cbi8qKiBQYXJzZXMgYW4gSVNPIDg2MDEgZGF0ZSBzdHJpbmcsIHdpdGggbm8gdGltZSBjb21wb25lbnRzLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGF0ZSh2YWx1ZTogc3RyaW5nKTogQ2FsZW5kYXJEYXRlIHtcbiAgbGV0IG0gPSB2YWx1ZS5tYXRjaChEQVRFX1JFKTtcbiAgaWYgKCFtKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIElTTyA4NjAxIGRhdGUgc3RyaW5nOiAnICsgdmFsdWUpO1xuICB9XG5cbiAgbGV0IGRhdGU6IE11dGFibGU8Q2FsZW5kYXJEYXRlPiA9IG5ldyBDYWxlbmRhckRhdGUoXG4gICAgcGFyc2VOdW1iZXIobVsxXSwgMCwgOTk5OSksXG4gICAgcGFyc2VOdW1iZXIobVsyXSwgMSwgMTIpLFxuICAgIDFcbiAgKTtcblxuICBkYXRlLmRheSA9IHBhcnNlTnVtYmVyKG1bM10sIDEsIGRhdGUuY2FsZW5kYXIuZ2V0RGF5c0luTW9udGgoZGF0ZSkpO1xuICByZXR1cm4gZGF0ZSBhcyBDYWxlbmRhckRhdGU7XG59XG5cbi8qKiBQYXJzZXMgYW4gSVNPIDg2MDEgZGF0ZSBhbmQgdGltZSBzdHJpbmcsIHdpdGggbm8gdGltZSB6b25lLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGF0ZVRpbWUodmFsdWU6IHN0cmluZyk6IENhbGVuZGFyRGF0ZVRpbWUge1xuICBsZXQgbSA9IHZhbHVlLm1hdGNoKERBVEVfVElNRV9SRSk7XG4gIGlmICghbSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJU08gODYwMSBkYXRlIHRpbWUgc3RyaW5nOiAnICsgdmFsdWUpO1xuICB9XG5cbiAgbGV0IHllYXIgPSBwYXJzZU51bWJlcihtWzFdLCAtOTk5OSwgOTk5OSk7XG4gIGxldCBlcmEgPSB5ZWFyIDwgMSA/ICdCQycgOiAnQUQnO1xuXG4gIGxldCBkYXRlOiBNdXRhYmxlPENhbGVuZGFyRGF0ZVRpbWU+ID0gbmV3IENhbGVuZGFyRGF0ZVRpbWUoXG4gICAgZXJhLFxuICAgIHllYXIgPCAxID8gLXllYXIgKyAxIDogeWVhcixcbiAgICBwYXJzZU51bWJlcihtWzJdLCAxLCAxMiksXG4gICAgMSxcbiAgICBtWzRdID8gcGFyc2VOdW1iZXIobVs0XSwgMCwgMjMpIDogMCxcbiAgICBtWzVdID8gcGFyc2VOdW1iZXIobVs1XSwgMCwgNTkpIDogMCxcbiAgICBtWzZdID8gcGFyc2VOdW1iZXIobVs2XSwgMCwgNTkpIDogMCxcbiAgICBtWzddID8gcGFyc2VOdW1iZXIobVs3XSwgMCwgSW5maW5pdHkpICogMTAwMCA6IDBcbiAgKTtcblxuICBkYXRlLmRheSA9IHBhcnNlTnVtYmVyKG1bM10sIDAsIGRhdGUuY2FsZW5kYXIuZ2V0RGF5c0luTW9udGgoZGF0ZSkpO1xuICByZXR1cm4gZGF0ZSBhcyBDYWxlbmRhckRhdGVUaW1lO1xufVxuXG4vKipcbiAqIFBhcnNlcyBhbiBJU08gODYwMSBkYXRlIGFuZCB0aW1lIHN0cmluZyB3aXRoIGEgdGltZSB6b25lIGV4dGVuc2lvbiBhbmQgb3B0aW9uYWwgVVRDIG9mZnNldFxuICogKGUuZy4gXCIyMDIxLTExLTA3VDAwOjQ1W0FtZXJpY2EvTG9zX0FuZ2VsZXNdXCIgb3IgXCIyMDIxLTExLTA3VDAwOjQ1LTA3OjAwW0FtZXJpY2EvTG9zX0FuZ2VsZXNdXCIpLlxuICogQW1iaWd1b3VzIHRpbWVzIGR1ZSB0byBkYXlsaWdodCBzYXZpbmcgdGltZSB0cmFuc2l0aW9ucyBhcmUgcmVzb2x2ZWQgYWNjb3JkaW5nIHRvIHRoZSBgZGlzYW1iaWd1YXRpb25gXG4gKiBwYXJhbWV0ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVpvbmVkRGF0ZVRpbWUodmFsdWU6IHN0cmluZywgZGlzYW1iaWd1YXRpb24/OiBEaXNhbWJpZ3VhdGlvbik6IFpvbmVkRGF0ZVRpbWUge1xuICBsZXQgbSA9IHZhbHVlLm1hdGNoKFpPTkVEX0RBVEVfVElNRV9SRSk7XG4gIGlmICghbSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJU08gODYwMSBkYXRlIHRpbWUgc3RyaW5nOiAnICsgdmFsdWUpO1xuICB9XG5cbiAgbGV0IHllYXIgPSBwYXJzZU51bWJlcihtWzFdLCAtOTk5OSwgOTk5OSk7XG4gIGxldCBlcmEgPSB5ZWFyIDwgMSA/ICdCQycgOiAnQUQnO1xuXG4gIGxldCBkYXRlOiBNdXRhYmxlPFpvbmVkRGF0ZVRpbWU+ID0gbmV3IFpvbmVkRGF0ZVRpbWUoXG4gICAgZXJhLFxuICAgIHllYXIgPCAxID8gLXllYXIgKyAxIDogeWVhcixcbiAgICBwYXJzZU51bWJlcihtWzJdLCAxLCAxMiksXG4gICAgMSxcbiAgICBtWzEwXSxcbiAgICAwLFxuICAgIG1bNF0gPyBwYXJzZU51bWJlcihtWzRdLCAwLCAyMykgOiAwLFxuICAgIG1bNV0gPyBwYXJzZU51bWJlcihtWzVdLCAwLCA1OSkgOiAwLFxuICAgIG1bNl0gPyBwYXJzZU51bWJlcihtWzZdLCAwLCA1OSkgOiAwLFxuICAgIG1bN10gPyBwYXJzZU51bWJlcihtWzddLCAwLCBJbmZpbml0eSkgKiAxMDAwIDogMFxuICApO1xuXG4gIGRhdGUuZGF5ID0gcGFyc2VOdW1iZXIobVszXSwgMCwgZGF0ZS5jYWxlbmRhci5nZXREYXlzSW5Nb250aChkYXRlKSk7XG5cbiAgbGV0IHBsYWluRGF0ZVRpbWUgPSB0b0NhbGVuZGFyRGF0ZVRpbWUoZGF0ZSBhcyBab25lZERhdGVUaW1lKTtcblxuICBsZXQgbXM6IG51bWJlcjtcbiAgaWYgKG1bOF0pIHtcbiAgICBkYXRlLm9mZnNldCA9IHBhcnNlTnVtYmVyKG1bOF0sIC0yMywgMjMpICogNjAgKiA2MCAqIDEwMDAgKyBwYXJzZU51bWJlcihtWzldID8/ICcwJywgMCwgNTkpICogNjAgKiAxMDAwO1xuICAgIG1zID0gZXBvY2hGcm9tRGF0ZShkYXRlIGFzIFpvbmVkRGF0ZVRpbWUpIC0gZGF0ZS5vZmZzZXQ7XG5cbiAgICAvLyBWYWxpZGF0ZSBvZmZzZXQgYWdhaW5zdCBwYXJzZWQgZGF0ZS5cbiAgICBsZXQgYWJzb2x1dGVzID0gcG9zc2libGVBYnNvbHV0ZXMocGxhaW5EYXRlVGltZSwgZGF0ZS50aW1lWm9uZSk7XG4gICAgaWYgKCFhYnNvbHV0ZXMuaW5jbHVkZXMobXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9mZnNldCAke29mZnNldFRvU3RyaW5nKGRhdGUub2Zmc2V0KX0gaXMgaW52YWxpZCBmb3IgJHtkYXRlVGltZVRvU3RyaW5nKGRhdGUpfSBpbiAke2RhdGUudGltZVpvbmV9YCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIENvbnZlcnQgdG8gYWJzb2x1dGUgYW5kIGJhY2sgdG8gZml4IGludmFsaWQgdGltZXMgZHVlIHRvIERTVC5cbiAgICBtcyA9IHRvQWJzb2x1dGUodG9DYWxlbmRhckRhdGVUaW1lKHBsYWluRGF0ZVRpbWUpLCBkYXRlLnRpbWVab25lLCBkaXNhbWJpZ3VhdGlvbik7XG4gIH1cblxuICByZXR1cm4gZnJvbUFic29sdXRlKG1zLCBkYXRlLnRpbWVab25lKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgYW4gSVNPIDg2MDEgZGF0ZSBhbmQgdGltZSBzdHJpbmcgd2l0aCBhIFVUQyBvZmZzZXQgKGUuZy4gXCIyMDIxLTExLTA3VDA3OjQ1OjAwWlwiXG4gKiBvciBcIjIwMjEtMTEtMDdUMDc6NDU6MDAtMDc6MDBcIikuIFRoZSByZXN1bHQgaXMgY29udmVydGVkIHRvIHRoZSBwcm92aWRlZCB0aW1lIHpvbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFic29sdXRlKHZhbHVlOiBzdHJpbmcsIHRpbWVab25lOiBzdHJpbmcpOiBab25lZERhdGVUaW1lIHtcbiAgbGV0IG0gPSB2YWx1ZS5tYXRjaChBQlNPTFVURV9SRSk7XG4gIGlmICghbSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJU08gODYwMSBkYXRlIHRpbWUgc3RyaW5nOiAnICsgdmFsdWUpO1xuICB9XG5cbiAgbGV0IHllYXIgPSBwYXJzZU51bWJlcihtWzFdLCAtOTk5OSwgOTk5OSk7XG4gIGxldCBlcmEgPSB5ZWFyIDwgMSA/ICdCQycgOiAnQUQnO1xuXG4gIGxldCBkYXRlOiBNdXRhYmxlPFpvbmVkRGF0ZVRpbWU+ID0gbmV3IFpvbmVkRGF0ZVRpbWUoXG4gICAgZXJhLFxuICAgIHllYXIgPCAxID8gLXllYXIgKyAxIDogeWVhcixcbiAgICBwYXJzZU51bWJlcihtWzJdLCAxLCAxMiksXG4gICAgMSxcbiAgICB0aW1lWm9uZSxcbiAgICAwLFxuICAgIG1bNF0gPyBwYXJzZU51bWJlcihtWzRdLCAwLCAyMykgOiAwLFxuICAgIG1bNV0gPyBwYXJzZU51bWJlcihtWzVdLCAwLCA1OSkgOiAwLFxuICAgIG1bNl0gPyBwYXJzZU51bWJlcihtWzZdLCAwLCA1OSkgOiAwLFxuICAgIG1bN10gPyBwYXJzZU51bWJlcihtWzddLCAwLCBJbmZpbml0eSkgKiAxMDAwIDogMFxuICApO1xuXG4gIGRhdGUuZGF5ID0gcGFyc2VOdW1iZXIobVszXSwgMCwgZGF0ZS5jYWxlbmRhci5nZXREYXlzSW5Nb250aChkYXRlKSk7XG5cbiAgaWYgKG1bOF0pIHtcbiAgICBkYXRlLm9mZnNldCA9IHBhcnNlTnVtYmVyKG1bOF0sIC0yMywgMjMpICogNjAgKiA2MCAqIDEwMDAgKyBwYXJzZU51bWJlcihtWzldID8/ICcwJywgMCwgNTkpICogNjAgKiAxMDAwO1xuICB9XG5cbiAgcmV0dXJuIHRvVGltZVpvbmUoZGF0ZSBhcyBab25lZERhdGVUaW1lLCB0aW1lWm9uZSk7XG59XG5cbi8qKlxuICogUGFyc2VzIGFuIElTTyA4NjAxIGRhdGUgYW5kIHRpbWUgc3RyaW5nIHdpdGggYSBVVEMgb2Zmc2V0IChlLmcuIFwiMjAyMS0xMS0wN1QwNzo0NTowMFpcIlxuICogb3IgXCIyMDIxLTExLTA3VDA3OjQ1OjAwLTA3OjAwXCIpLiBUaGUgcmVzdWx0IGlzIGNvbnZlcnRlZCB0byB0aGUgdXNlcidzIGxvY2FsIHRpbWUgem9uZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQWJzb2x1dGVUb0xvY2FsKHZhbHVlOiBzdHJpbmcpOiBab25lZERhdGVUaW1lIHtcbiAgcmV0dXJuIHBhcnNlQWJzb2x1dGUodmFsdWUsIGdldExvY2FsVGltZVpvbmUoKSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTnVtYmVyKHZhbHVlOiBzdHJpbmcsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuICBsZXQgdmFsID0gTnVtYmVyKHZhbHVlKTtcbiAgaWYgKHZhbCA8IG1pbiB8fCB2YWwgPiBtYXgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVmFsdWUgb3V0IG9mIHJhbmdlOiAke21pbn0gPD0gJHt2YWx9IDw9ICR7bWF4fWApO1xuICB9XG5cbiAgcmV0dXJuIHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVUb1N0cmluZyh0aW1lOiBUaW1lKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke1N0cmluZyh0aW1lLmhvdXIpLnBhZFN0YXJ0KDIsICcwJyl9OiR7U3RyaW5nKHRpbWUubWludXRlKS5wYWRTdGFydCgyLCAnMCcpfToke1N0cmluZyh0aW1lLnNlY29uZCkucGFkU3RhcnQoMiwgJzAnKX0ke3RpbWUubWlsbGlzZWNvbmQgPyBTdHJpbmcodGltZS5taWxsaXNlY29uZCAvIDEwMDApLnNsaWNlKDEpIDogJyd9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGVUb1N0cmluZyhkYXRlOiBDYWxlbmRhckRhdGUpOiBzdHJpbmcge1xuICBsZXQgZ3JlZ29yaWFuRGF0ZSA9IHRvQ2FsZW5kYXIoZGF0ZSwgbmV3IEdyZWdvcmlhbkNhbGVuZGFyKCkpO1xuICBsZXQgeWVhcjogc3RyaW5nO1xuICBpZiAoZ3JlZ29yaWFuRGF0ZS5lcmEgPT09ICdCQycpIHtcbiAgICB5ZWFyID0gZ3JlZ29yaWFuRGF0ZS55ZWFyID09PSAxXG4gICAgICA/ICcwMDAwJ1xuICAgICAgOiAnLScgKyBTdHJpbmcoTWF0aC5hYnMoMSAtIGdyZWdvcmlhbkRhdGUueWVhcikpLnBhZFN0YXJ0KDYsICcwMCcpO1xuICB9IGVsc2Uge1xuICAgIHllYXIgPSBTdHJpbmcoZ3JlZ29yaWFuRGF0ZS55ZWFyKS5wYWRTdGFydCg0LCAnMCcpO1xuICB9XG4gIHJldHVybiBgJHt5ZWFyfS0ke1N0cmluZyhncmVnb3JpYW5EYXRlLm1vbnRoKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhncmVnb3JpYW5EYXRlLmRheSkucGFkU3RhcnQoMiwgJzAnKX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0ZVRpbWVUb1N0cmluZyhkYXRlOiBBbnlEYXRlVGltZSk6IHN0cmluZyB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgcmV0dXJuIGAke2RhdGVUb1N0cmluZyhkYXRlKX1UJHt0aW1lVG9TdHJpbmcoZGF0ZSl9YDtcbn1cblxuZnVuY3Rpb24gb2Zmc2V0VG9TdHJpbmcob2Zmc2V0OiBudW1iZXIpIHtcbiAgbGV0IHNpZ24gPSBNYXRoLnNpZ24ob2Zmc2V0KSA8IDAgPyAnLScgOiAnKyc7XG4gIG9mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7XG4gIGxldCBvZmZzZXRIb3VycyA9IE1hdGguZmxvb3Iob2Zmc2V0IC8gKDYwICogNjAgKiAxMDAwKSk7XG4gIGxldCBvZmZzZXRNaW51dGVzID0gKG9mZnNldCAlICg2MCAqIDYwICogMTAwMCkpIC8gKDYwICogMTAwMCk7XG4gIHJldHVybiBgJHtzaWdufSR7U3RyaW5nKG9mZnNldEhvdXJzKS5wYWRTdGFydCgyLCAnMCcpfToke1N0cmluZyhvZmZzZXRNaW51dGVzKS5wYWRTdGFydCgyLCAnMCcpfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB6b25lZERhdGVUaW1lVG9TdHJpbmcoZGF0ZTogWm9uZWREYXRlVGltZSk6IHN0cmluZyB7XG4gIHJldHVybiBgJHtkYXRlVGltZVRvU3RyaW5nKGRhdGUpfSR7b2Zmc2V0VG9TdHJpbmcoZGF0ZS5vZmZzZXQpfVske2RhdGUudGltZVpvbmV9XWA7XG59XG5cbi8qKlxuICogUGFyc2VzIGFuIElTTyA4NjAxIGR1cmF0aW9uIHN0cmluZyAoZS5nLiBcIlAzWTZNNlc0RFQxMkgzME01U1wiKS5cbiAqIEBwYXJhbSB2YWx1ZSBBbiBJU08gODYwMSBkdXJhdGlvbiBzdHJpbmcuXG4gKiBAcmV0dXJucyBBIERhdGVUaW1lRHVyYXRpb24gb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEdXJhdGlvbih2YWx1ZTogc3RyaW5nKTogUmVxdWlyZWQ8RGF0ZVRpbWVEdXJhdGlvbj4ge1xuICBjb25zdCBtYXRjaCA9IHZhbHVlLm1hdGNoKERBVEVfVElNRV9EVVJBVElPTl9SRSk7XG5cbiAgaWYgKCFtYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBJU08gODYwMSBEdXJhdGlvbiBzdHJpbmc6ICR7dmFsdWV9YCk7XG4gIH1cblxuICBjb25zdCBwYXJzZUR1cmF0aW9uR3JvdXAgPSAoXG4gICAgZ3JvdXA6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBpc05lZ2F0aXZlOiBib29sZWFuXG4gICk6IG51bWJlciA9PiB7XG4gICAgaWYgKCFncm91cCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzaWduID0gaXNOZWdhdGl2ZSA/IC0xIDogMTtcbiAgICAgIHJldHVybiBzaWduICogTnVtYmVyKGdyb3VwLnJlcGxhY2UoJywnLCAnLicpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBJU08gODYwMSBEdXJhdGlvbiBzdHJpbmc6ICR7dmFsdWV9YCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGlzTmVnYXRpdmUgPSAhIW1hdGNoLmdyb3Vwcz8ubmVnYXRpdmU7XG5cbiAgY29uc3QgaGFzUmVxdWlyZWRHcm91cHMgPSByZXF1aXJlZER1cmF0aW9uR3JvdXBzLnNvbWUoZ3JvdXAgPT4gbWF0Y2guZ3JvdXBzPy5bZ3JvdXBdKTtcblxuICBpZiAoIWhhc1JlcXVpcmVkR3JvdXBzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIElTTyA4NjAxIER1cmF0aW9uIHN0cmluZzogJHt2YWx1ZX1gKTtcbiAgfVxuXG4gIGNvbnN0IGR1cmF0aW9uU3RyaW5nSW5jbHVkZXNUaW1lID0gbWF0Y2guZ3JvdXBzPy50aW1lO1xuXG4gIGlmIChkdXJhdGlvblN0cmluZ0luY2x1ZGVzVGltZSkge1xuICAgIGNvbnN0IGhhc1JlcXVpcmVkRHVyYXRpb25UaW1lR3JvdXBzID0gcmVxdWlyZWREdXJhdGlvblRpbWVHcm91cHMuc29tZShncm91cCA9PiBtYXRjaC5ncm91cHM/Lltncm91cF0pO1xuICAgIGlmICghaGFzUmVxdWlyZWREdXJhdGlvblRpbWVHcm91cHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBJU08gODYwMSBEdXJhdGlvbiBzdHJpbmc6ICR7dmFsdWV9YCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZHVyYXRpb246IE11dGFibGU8RGF0ZVRpbWVEdXJhdGlvbj4gPSB7XG4gICAgeWVhcnM6IHBhcnNlRHVyYXRpb25Hcm91cChtYXRjaC5ncm91cHM/LnllYXJzLCBpc05lZ2F0aXZlKSxcbiAgICBtb250aHM6IHBhcnNlRHVyYXRpb25Hcm91cChtYXRjaC5ncm91cHM/Lm1vbnRocywgaXNOZWdhdGl2ZSksXG4gICAgd2Vla3M6IHBhcnNlRHVyYXRpb25Hcm91cChtYXRjaC5ncm91cHM/LndlZWtzLCBpc05lZ2F0aXZlKSxcbiAgICBkYXlzOiBwYXJzZUR1cmF0aW9uR3JvdXAobWF0Y2guZ3JvdXBzPy5kYXlzLCBpc05lZ2F0aXZlKSxcbiAgICBob3VyczogcGFyc2VEdXJhdGlvbkdyb3VwKG1hdGNoLmdyb3Vwcz8uaG91cnMsIGlzTmVnYXRpdmUpLFxuICAgIG1pbnV0ZXM6IHBhcnNlRHVyYXRpb25Hcm91cChtYXRjaC5ncm91cHM/Lm1pbnV0ZXMsIGlzTmVnYXRpdmUpLFxuICAgIHNlY29uZHM6IHBhcnNlRHVyYXRpb25Hcm91cChtYXRjaC5ncm91cHM/LnNlY29uZHMsIGlzTmVnYXRpdmUpXG4gIH07XG5cbiAgaWYgKGR1cmF0aW9uLmhvdXJzICE9PSB1bmRlZmluZWQgJiYgKChkdXJhdGlvbi5ob3VycyAlIDEpICE9PSAwKSAmJiAoZHVyYXRpb24ubWludXRlcyB8fCBkdXJhdGlvbi5zZWNvbmRzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBJU08gODYwMSBEdXJhdGlvbiBzdHJpbmc6ICR7dmFsdWV9IC0gb25seSB0aGUgc21hbGxlc3QgdW5pdCBjYW4gYmUgZnJhY3Rpb25hbGApO1xuICB9XG5cbiAgaWYgKGR1cmF0aW9uLm1pbnV0ZXMgIT09IHVuZGVmaW5lZCAmJiAoKGR1cmF0aW9uLm1pbnV0ZXMgJSAxKSAhPT0gMCkgJiYgZHVyYXRpb24uc2Vjb25kcykge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBJU08gODYwMSBEdXJhdGlvbiBzdHJpbmc6ICR7dmFsdWV9IC0gb25seSB0aGUgc21hbGxlc3QgdW5pdCBjYW4gYmUgZnJhY3Rpb25hbGApO1xuICB9XG5cbiAgcmV0dXJuIGR1cmF0aW9uIGFzIFJlcXVpcmVkPERhdGVUaW1lRHVyYXRpb24+O1xufVxuIl0sIm5hbWVzIjpbXSwidmVyc2lvbiI6MywiZmlsZSI6InN0cmluZy5tb2R1bGUuanMubWFwIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzBdfQ==